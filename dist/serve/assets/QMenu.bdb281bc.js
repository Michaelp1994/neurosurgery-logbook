var Le=Object.defineProperty,Oe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var Z=(e,t,n)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))Re.call(t,n)&&Z(e,n,t[n]);if(J)for(var n of J(t))Fe.call(t,n)&&Z(e,n,t[n]);return e},B=(e,t)=>Oe(e,Be(t));import{at as $e,x as k,W as ce,$ as ee,H as D,X as te,G as x,M as Ae,L as H,P as de,Y as De,a4 as F,au as ne,av as ze,N as $,aw as Ke,J as g,aj as z,ax as Ne,K as Qe,Z as je,ay as Ge,R as Ie,a1 as _e,az as Ve,a3 as Ue}from"./vendor.3fb54e24.js";import{u as Xe,a as Ye,b as Je}from"./use-model-toggle.a87aeb12.js";import{d as Ze,e as et}from"./QCard.ba24e7ad.js";import{n as R,r as oe,o as tt,g as nt}from"./use-key-composition.9a07a52d.js";function ot(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),$e.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const it={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function lt({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:i,proxy:l,emit:s}=de(),o=k(null);let f;function d(a){return o.value===null?!1:a===void 0||a.touches===void 0||a.touches.length<=1}const r={};n===void 0&&(Object.assign(r,{hide(a){l.hide(a)},toggle(a){l.toggle(a),a.qAnchorHandled=!0},toggleKey(a){ce(a,13)===!0&&r.toggle(a)},contextClick(a){l.hide(a),ee(a),D(()=>{l.show(a),a.qAnchorHandled=!0})},prevent:ee,mobileTouch(a){if(r.mobileCleanup(a),d(a)!==!0)return;l.hide(a),o.value.classList.add("non-selectable");const h=a.target;te(r,"anchor",[[h,"touchmove","mobileCleanup","passive"],[h,"touchend","mobileCleanup","passive"],[h,"touchcancel","mobileCleanup","passive"],[o.value,"contextmenu","prevent","notPassive"]]),f=setTimeout(()=>{l.show(a),a.qAnchorHandled=!0},300)},mobileCleanup(a){o.value.classList.remove("non-selectable"),clearTimeout(f),e.value===!0&&a!==void 0&&ot()}}),n=function(a=i.contextMenu){if(i.noParentEvent===!0||o.value===null)return;let h;a===!0?l.$q.platform.is.mobile===!0?h=[[o.value,"touchstart","mobileTouch","passive"]]:h=[[o.value,"mousedown","hide","passive"],[o.value,"contextmenu","contextClick","notPassive"]]:h=[[o.value,"click","toggle","passive"],[o.value,"keyup","toggleKey","passive"]],te(r,"anchor",h)});function c(){De(r,"anchor")}function v(a){for(o.value=a;o.value.classList.contains("q-anchor--skip");)o.value=o.value.parentNode;n()}function m(){if(i.target===!1||i.target==="")o.value=null;else if(i.target===!0)v(l.$el.parentNode);else{let a=i.target;if(typeof i.target=="string")try{a=document.querySelector(i.target)}catch{a=void 0}a!=null?(o.value=a.$el||a,n()):(o.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return x(()=>i.contextMenu,a=>{o.value!==null&&(c(),n(a))}),x(()=>i.target,()=>{o.value!==null&&c(),m()}),x(()=>i.noParentEvent,a=>{o.value!==null&&(a===!0?c():n())}),Ae(()=>{m(),t!==!0&&i.modelValue===!0&&o.value===null&&s("update:modelValue",!1)}),H(()=>{clearTimeout(f),c()}),{anchorEl:o,canShow:d,anchorEvents:r}}function at(e,t){const n=k(null);let i;function l(f,d){const r=`${d!==void 0?"add":"remove"}EventListener`,c=d!==void 0?d:i;f!==window&&f[r]("scroll",c,F.passive),window[r]("scroll",c,F.passive),i=d}function s(){n.value!==null&&(l(n.value),n.value=null)}const o=x(()=>e.noParentEvent,()=>{n.value!==null&&(s(),t())});return H(o),{localScrollTarget:n,unconfigureScrollTarget:s,changeScrollEvent:l}}let ut=document.body;function rt(e){const t=document.createElement("div");if(e!==void 0&&(t.id=e),ne.globalNodes!==void 0){const n=ne.globalNodes.class;n!==void 0&&(t.className=n)}return ut.appendChild(t),t}function st(e){e.remove()}const C=[];function ct(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return R(e)}else if(e.__qPortalInnerRef!==void 0){const n=R(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=R(e)}while(e!=null)}function dt(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function ft(e,t,n,i){const l=k(!1);let s=null;const o={},f=i===!0&&dt(e);function d(c){if(c===!0){oe(o);return}l.value===!1&&(f===!1&&s===null&&(s=rt()),l.value=!0,C.push(e.proxy),tt(o))}function r(){oe(o),l.value=!1;const c=C.indexOf(e.proxy);c>-1&&C.splice(c,1),s!==null&&(st(s),s=null)}return ze(r),Object.assign(e.proxy,{__qPortalInnerRef:t}),{showPortal:d,hidePortal:r,portalIsActive:l,renderPortal:()=>f===!0?n():l.value===!0?[$(Ke,{to:s},n())]:void 0}}const ht={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function mt(e,t){const n=k(t.value);return x(t,i=>{D(()=>{n.value=i})}),{transition:g(()=>"q-transition--"+(n.value===!0?e.transitionHide:e.transitionShow)),transitionStyle:g(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function vt(){let e;return H(()=>{e=void 0}),{registerTick(t){e=t,D(()=>{e===t&&(e(),e=void 0)})},removeTick(){e=void 0}}}function gt(){let e;return H(()=>{clearTimeout(e)}),{registerTimeout(t,n){clearTimeout(e),e=setTimeout(t,n)},removeTimeout(){clearTimeout(e)}}}const y=[];let E;function pt(e){E=e.keyCode===27}function xt(){E===!0&&(E=!1)}function yt(e){E===!0&&(E=!1,ce(e,27)===!0&&y[y.length-1](e))}function fe(e){window[e]("keydown",pt),window[e]("blur",xt),window[e]("keyup",yt),E=!1}function bt(e){z.is.desktop===!0&&(y.push(e),y.length===1&&fe("addEventListener"))}function ie(e){const t=y.indexOf(e);t>-1&&(y.splice(t,1),y.length===0&&fe("removeEventListener"))}const b=[];function he(e){b[b.length-1](e)}function wt(e){z.is.desktop===!0&&(b.push(e),b.length===1&&document.body.addEventListener("focusin",he))}function Tt(e){const t=b.indexOf(e);t>-1&&(b.splice(t,1),b.length===0&&document.body.removeEventListener("focusin",he))}let me;const{notPassiveCapture:P}=F,w=[];function M(e){clearTimeout(me);const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=C.length-1;for(;n>=0;){const i=C[n].$;if(i.type.name!=="QDialog")break;if(i.props.seamless!==!0)return;n--}for(let i=w.length-1;i>=0;i--){const l=w[i];if((l.anchorEl.value===null||l.anchorEl.value.contains(t)===!1)&&(t===document.body||l.innerRef.value!==null&&l.innerRef.value.contains(t)===!1))e.qClickOutside=!0,l.onClickOutside(e);else return}}function kt(e){w.push(e),w.length===1&&(document.addEventListener("mousedown",M,P),document.addEventListener("touchstart",M,P))}function le(e){const t=w.findIndex(n=>n===e);t>-1&&(w.splice(t,1),w.length===0&&(clearTimeout(me),document.removeEventListener("mousedown",M,P),document.removeEventListener("touchstart",M,P)))}let ae,ue;function re(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Et(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const A={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{A[`${e}#ltr`]=e,A[`${e}#rtl`]=e});function se(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:A[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function St(e,t){let{top:n,left:i,right:l,bottom:s,width:o,height:f}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],i-=t[0],s+=t[1],l+=t[0],o+=t[0],f+=t[1]),{top:n,left:i,right:l,bottom:s,width:o,height:f,middle:i+(l-i)/2,center:n+(s-n)/2}}function Ct(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function Ht(e){if(z.is.ios===!0&&window.visualViewport!==void 0){const f=document.body.style,{offsetLeft:d,offsetTop:r}=window.visualViewport;d!==ae&&(f.setProperty("--q-pe-left",d+"px"),ae=d),r!==ue&&(f.setProperty("--q-pe-top",r+"px"),ue=r)}let t;const{scrollLeft:n,scrollTop:i}=e.el;if(e.absoluteOffset===void 0)t=St(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:f,left:d}=e.anchorEl.getBoundingClientRect(),r=f+e.absoluteOffset.top,c=d+e.absoluteOffset.left;t={top:r,left:c,width:1,height:1,right:c+1,center:r,middle:c,bottom:r+1}}let l={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(l.minWidth=t.width+"px",e.cover===!0&&(l.minHeight=t.height+"px")),Object.assign(e.el.style,l);const s=Ct(e.el),o={top:t[e.anchorOrigin.vertical]-s[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-s[e.selfOrigin.horizontal]};Pt(o,t,s,e.anchorOrigin,e.selfOrigin),l={top:o.top+"px",left:o.left+"px"},o.maxHeight!==void 0&&(l.maxHeight=o.maxHeight+"px",t.height>o.maxHeight&&(l.minHeight=l.maxHeight)),o.maxWidth!==void 0&&(l.maxWidth=o.maxWidth+"px",t.width>o.maxWidth&&(l.minWidth=l.maxWidth)),Object.assign(e.el.style,l),e.el.scrollTop!==i&&(e.el.scrollTop=i),e.el.scrollLeft!==n&&(e.el.scrollLeft=n)}function Pt(e,t,n,i,l){const s=n.bottom,o=n.right,f=Ne(),d=window.innerHeight-f,r=document.body.clientWidth;if(e.top<0||e.top+s>d)if(l.vertical==="center")e.top=t[i.vertical]>d/2?Math.max(0,d-s):0,e.maxHeight=Math.min(s,d);else if(t[i.vertical]>d/2){const c=Math.min(d,i.vertical==="center"?t.center:i.vertical===l.vertical?t.bottom:t.top);e.maxHeight=Math.min(s,c),e.top=Math.max(0,c-s)}else e.top=Math.max(0,i.vertical==="center"?t.center:i.vertical===l.vertical?t.top:t.bottom),e.maxHeight=Math.min(s,d-e.top);if(e.left<0||e.left+o>r)if(e.maxWidth=Math.min(o,r),l.horizontal==="middle")e.left=t[i.horizontal]>r/2?Math.max(0,r-o):0;else if(t[i.horizontal]>r/2){const c=Math.min(r,i.horizontal==="middle"?t.middle:i.horizontal===l.horizontal?t.right:t.left);e.maxWidth=Math.min(o,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,i.horizontal==="middle"?t.middle:i.horizontal===l.horizontal?t.left:t.right),e.maxWidth=Math.min(o,r-e.left)}var Bt=Qe({name:"QMenu",inheritAttrs:!1,props:B(p(p(p(p({},it),Xe),Ze),ht),{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:re},self:{type:String,validator:re},offset:{type:Array,validator:Et},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}}),emits:[...Ye,"click","escape-key"],setup(e,{slots:t,emit:n,attrs:i}){let l=null,s,o,f;const d=de(),{proxy:r}=d,{$q:c}=r,v=k(null),m=k(!1),a=g(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),h=et(e,c),{registerTick:ve,removeTick:K}=vt(),{registerTimeout:N,removeTimeout:Q}=gt(),{transition:ge,transitionStyle:pe}=mt(e,m),{localScrollTarget:j,changeScrollEvent:xe,unconfigureScrollTarget:ye}=at(e,X),{anchorEl:T,canShow:be}=lt({showing:m}),{hide:G}=Je({showing:m,canShow:be,handleShow:Ce,handleHide:He,hideOnRouteChange:a,processOnMount:!0}),{showPortal:I,hidePortal:we,renderPortal:Te}=ft(d,v,Me),W={anchorEl:T,innerRef:v,onClickOutside(u){if(e.persistent!==!0&&m.value===!0)return G(u),(u.type==="touchstart"||u.target.classList.contains("q-dialog__backdrop"))&&Ue(u),!0}},_=g(()=>se(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),ke=g(()=>e.cover===!0?_.value:se(e.self||"top start",c.lang.rtl)),Ee=g(()=>(e.square===!0?" q-menu--square":"")+(h.value===!0?" q-menu--dark q-dark":"")),Se=g(()=>e.autoClose===!0?{onClick:Pe}:{}),V=g(()=>m.value===!0&&e.persistent!==!0);x(V,u=>{u===!0?(bt(L),kt(W)):(ie(L),le(W))});function q(){nt(()=>{let u=v.value;u&&u.contains(document.activeElement)!==!0&&(u=u.querySelector("[autofocus], [data-autofocus]")||u,u.focus({preventScroll:!0}))})}function Ce(u){if(K(),Q(),l=e.noRefocus===!1?document.activeElement:null,wt(Y),I(),X(),s=void 0,u!==void 0&&(e.touchPosition||e.contextMenu)){const O=je(u);if(O.left!==void 0){const{top:We,left:qe}=T.value.getBoundingClientRect();s={left:O.left-qe,top:O.top-We}}}o===void 0&&(o=x(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,S)),e.noFocus!==!0&&document.activeElement.blur(),ve(()=>{S(),e.noFocus!==!0&&q()}),N(()=>{c.platform.is.ios===!0&&(f=e.autoClose,v.value.click()),S(),I(!0),n("show",u)},e.transitionDuration)}function He(u){K(),Q(),U(!0),l!==null&&(u===void 0||u.qClickOutside!==!0)&&(l.focus(),l=null),N(()=>{we(),n("hide",u)},e.transitionDuration)}function U(u){s=void 0,o!==void 0&&(o(),o=void 0),(u===!0||m.value===!0)&&(Tt(Y),ye(),le(W),ie(L)),u!==!0&&(l=null)}function X(){(T.value!==null||e.scrollTarget!==void 0)&&(j.value=Ge(T.value,e.scrollTarget),xe(j.value,S))}function Pe(u){f!==!0?(ct(r,u),n("click",u)):f=!1}function Y(u){V.value===!0&&e.noFocus!==!0&&Ve(v.value,u.target)!==!0&&q()}function L(u){n("escape-key"),G(u)}function S(){const u=v.value;u===null||T.value===null||Ht({el:u,offset:e.offset,anchorEl:T.value,anchorOrigin:_.value,selfOrigin:ke.value,absoluteOffset:s,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Me(){return $(_e,{name:ge.value,appear:!0},()=>m.value===!0?$("div",p(B(p({},i),{ref:v,tabindex:-1,class:["q-menu q-position-engine scroll"+Ee.value,i.class],style:[i.style,pe.value]}),Se.value),Ie(t.default)):null)}return H(U),Object.assign(r,{focus:q,updatePosition:S}),Te}});export{Bt as Q,ht as a,vt as b,ot as c,ft as d,ie as e,wt as f,bt as g,Tt as r,gt as u};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUU1lbnUuYmRiMjgxYmMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUvc2VsZWN0aW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtYW5jaG9yLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc2Nyb2xsLXRhcmdldC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUvZ2xvYmFsLW5vZGVzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS9wb3J0YWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1wb3J0YWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS10cmFuc2l0aW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtdGljay5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXRpbWVvdXQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2VzY2FwZS1rZXkuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2ZvY3Vzb3V0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS9jbGljay1vdXRzaWRlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS9wb3NpdGlvbi1lbmdpbmUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL21lbnUvUU1lbnUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBsYXRmb3JtIGZyb20gJy4uLy4uL3BsdWdpbnMvUGxhdGZvcm0uanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbiAoKSB7XG4gIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uICE9PSB2b2lkIDApIHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKClcbiAgICBpZiAoc2VsZWN0aW9uLmVtcHR5ICE9PSB2b2lkIDApIHtcbiAgICAgIHNlbGVjdGlvbi5lbXB0eSgpXG4gICAgfVxuICAgIGVsc2UgaWYgKHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMgIT09IHZvaWQgMCkge1xuICAgICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpXG4gICAgICBQbGF0Zm9ybS5pcy5tb2JpbGUgIT09IHRydWUgJiYgc2VsZWN0aW9uLmFkZFJhbmdlKGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkpXG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KClcbiAgfVxufVxuIiwiaW1wb3J0IHsgcmVmLCB3YXRjaCwgb25Nb3VudGVkLCBvbkJlZm9yZVVubW91bnQsIG5leHRUaWNrLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB7IGNsZWFyU2VsZWN0aW9uIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9zZWxlY3Rpb24uanMnXG5pbXBvcnQgeyBhZGRFdnQsIGNsZWFuRXZ0LCBwcmV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBpc0tleUNvZGUgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2tleS1jb21wb3NpdGlvbi5qcydcblxuZXhwb3J0IGNvbnN0IHVzZUFuY2hvclByb3BzID0ge1xuICB0YXJnZXQ6IHtcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0sXG4gIG5vUGFyZW50RXZlbnQ6IEJvb2xlYW4sXG4gIGNvbnRleHRNZW51OiBCb29sZWFuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh7XG4gIHNob3dpbmcsXG4gIGF2b2lkRW1pdCwgLy8gcmVxdWlyZWQgZm9yIFFQb3B1cFByb3h5ICh0cnVlKVxuICBjb25maWd1cmVBbmNob3JFbCAvLyBvcHRpb25hbFxufSkge1xuICBjb25zdCB7IHByb3BzLCBwcm94eSwgZW1pdCB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcblxuICBjb25zdCBhbmNob3JFbCA9IHJlZihudWxsKVxuXG4gIGxldCB0b3VjaFRpbWVyXG5cbiAgZnVuY3Rpb24gY2FuU2hvdyAoZXZ0KSB7XG4gICAgLy8gYWJvcnQgd2l0aCBubyBwYXJlbnQgY29uZmlndXJlZCBvciBvbiBtdWx0aS10b3VjaFxuICAgIHJldHVybiBhbmNob3JFbC52YWx1ZSA9PT0gbnVsbFxuICAgICAgPyBmYWxzZVxuICAgICAgOiAoZXZ0ID09PSB2b2lkIDAgfHwgZXZ0LnRvdWNoZXMgPT09IHZvaWQgMCB8fCBldnQudG91Y2hlcy5sZW5ndGggPD0gMSlcbiAgfVxuXG4gIGNvbnN0IGFuY2hvckV2ZW50cyA9IHt9XG5cbiAgaWYgKGNvbmZpZ3VyZUFuY2hvckVsID09PSB2b2lkIDApIHtcbiAgICAvLyBkZWZhdWx0IGNvbmZpZ3VyZUFuY2hvckVsIGlzIGRlc2lnbmVkIGZvclxuICAgIC8vIFFNZW51ICYgUVBvcHVwUHJveHkgKHdoaWNoIGlzIHdoeSBpdCdzIGhhbmRsZWQgaGVyZSlcblxuICAgIE9iamVjdC5hc3NpZ24oYW5jaG9yRXZlbnRzLCB7XG4gICAgICBoaWRlIChldnQpIHtcbiAgICAgICAgcHJveHkuaGlkZShldnQpXG4gICAgICB9LFxuXG4gICAgICB0b2dnbGUgKGV2dCkge1xuICAgICAgICBwcm94eS50b2dnbGUoZXZ0KVxuICAgICAgICBldnQucUFuY2hvckhhbmRsZWQgPSB0cnVlXG4gICAgICB9LFxuXG4gICAgICB0b2dnbGVLZXkgKGV2dCkge1xuICAgICAgICBpc0tleUNvZGUoZXZ0LCAxMykgPT09IHRydWUgJiYgYW5jaG9yRXZlbnRzLnRvZ2dsZShldnQpXG4gICAgICB9LFxuXG4gICAgICBjb250ZXh0Q2xpY2sgKGV2dCkge1xuICAgICAgICBwcm94eS5oaWRlKGV2dClcbiAgICAgICAgcHJldmVudChldnQpXG4gICAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICBwcm94eS5zaG93KGV2dClcbiAgICAgICAgICBldnQucUFuY2hvckhhbmRsZWQgPSB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9LFxuXG4gICAgICBwcmV2ZW50LFxuXG4gICAgICBtb2JpbGVUb3VjaCAoZXZ0KSB7XG4gICAgICAgIGFuY2hvckV2ZW50cy5tb2JpbGVDbGVhbnVwKGV2dClcblxuICAgICAgICBpZiAoY2FuU2hvdyhldnQpICE9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBwcm94eS5oaWRlKGV2dClcbiAgICAgICAgYW5jaG9yRWwudmFsdWUuY2xhc3NMaXN0LmFkZCgnbm9uLXNlbGVjdGFibGUnKVxuXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXRcbiAgICAgICAgYWRkRXZ0KGFuY2hvckV2ZW50cywgJ2FuY2hvcicsIFtcbiAgICAgICAgICBbIHRhcmdldCwgJ3RvdWNobW92ZScsICdtb2JpbGVDbGVhbnVwJywgJ3Bhc3NpdmUnIF0sXG4gICAgICAgICAgWyB0YXJnZXQsICd0b3VjaGVuZCcsICdtb2JpbGVDbGVhbnVwJywgJ3Bhc3NpdmUnIF0sXG4gICAgICAgICAgWyB0YXJnZXQsICd0b3VjaGNhbmNlbCcsICdtb2JpbGVDbGVhbnVwJywgJ3Bhc3NpdmUnIF0sXG4gICAgICAgICAgWyBhbmNob3JFbC52YWx1ZSwgJ2NvbnRleHRtZW51JywgJ3ByZXZlbnQnLCAnbm90UGFzc2l2ZScgXVxuICAgICAgICBdKVxuXG4gICAgICAgIHRvdWNoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBwcm94eS5zaG93KGV2dClcbiAgICAgICAgICBldnQucUFuY2hvckhhbmRsZWQgPSB0cnVlXG4gICAgICAgIH0sIDMwMClcbiAgICAgIH0sXG5cbiAgICAgIG1vYmlsZUNsZWFudXAgKGV2dCkge1xuICAgICAgICBhbmNob3JFbC52YWx1ZS5jbGFzc0xpc3QucmVtb3ZlKCdub24tc2VsZWN0YWJsZScpXG4gICAgICAgIGNsZWFyVGltZW91dCh0b3VjaFRpbWVyKVxuXG4gICAgICAgIGlmIChzaG93aW5nLnZhbHVlID09PSB0cnVlICYmIGV2dCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgY2xlYXJTZWxlY3Rpb24oKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbmZpZ3VyZUFuY2hvckVsID0gZnVuY3Rpb24gKGNvbnRleHQgPSBwcm9wcy5jb250ZXh0TWVudSkge1xuICAgICAgaWYgKHByb3BzLm5vUGFyZW50RXZlbnQgPT09IHRydWUgfHwgYW5jaG9yRWwudmFsdWUgPT09IG51bGwpIHsgcmV0dXJuIH1cblxuICAgICAgbGV0IGV2dHNcblxuICAgICAgaWYgKGNvbnRleHQgPT09IHRydWUpIHtcbiAgICAgICAgaWYgKHByb3h5LiRxLnBsYXRmb3JtLmlzLm1vYmlsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGV2dHMgPSBbXG4gICAgICAgICAgICBbIGFuY2hvckVsLnZhbHVlLCAndG91Y2hzdGFydCcsICdtb2JpbGVUb3VjaCcsICdwYXNzaXZlJyBdXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGV2dHMgPSBbXG4gICAgICAgICAgICBbIGFuY2hvckVsLnZhbHVlLCAnbW91c2Vkb3duJywgJ2hpZGUnLCAncGFzc2l2ZScgXSxcbiAgICAgICAgICAgIFsgYW5jaG9yRWwudmFsdWUsICdjb250ZXh0bWVudScsICdjb250ZXh0Q2xpY2snLCAnbm90UGFzc2l2ZScgXVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGV2dHMgPSBbXG4gICAgICAgICAgWyBhbmNob3JFbC52YWx1ZSwgJ2NsaWNrJywgJ3RvZ2dsZScsICdwYXNzaXZlJyBdLFxuICAgICAgICAgIFsgYW5jaG9yRWwudmFsdWUsICdrZXl1cCcsICd0b2dnbGVLZXknLCAncGFzc2l2ZScgXVxuICAgICAgICBdXG4gICAgICB9XG5cbiAgICAgIGFkZEV2dChhbmNob3JFdmVudHMsICdhbmNob3InLCBldnRzKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVuY29uZmlndXJlQW5jaG9yRWwgKCkge1xuICAgIGNsZWFuRXZ0KGFuY2hvckV2ZW50cywgJ2FuY2hvcicpXG4gIH1cblxuICBmdW5jdGlvbiBzZXRBbmNob3JFbCAoZWwpIHtcbiAgICBhbmNob3JFbC52YWx1ZSA9IGVsXG4gICAgd2hpbGUgKGFuY2hvckVsLnZhbHVlLmNsYXNzTGlzdC5jb250YWlucygncS1hbmNob3ItLXNraXAnKSkge1xuICAgICAgYW5jaG9yRWwudmFsdWUgPSBhbmNob3JFbC52YWx1ZS5wYXJlbnROb2RlXG4gICAgfVxuICAgIGNvbmZpZ3VyZUFuY2hvckVsKClcbiAgfVxuXG4gIGZ1bmN0aW9uIHBpY2tBbmNob3JFbCAoKSB7XG4gICAgaWYgKHByb3BzLnRhcmdldCA9PT0gZmFsc2UgfHwgcHJvcHMudGFyZ2V0ID09PSAnJykge1xuICAgICAgYW5jaG9yRWwudmFsdWUgPSBudWxsXG4gICAgfVxuICAgIGVsc2UgaWYgKHByb3BzLnRhcmdldCA9PT0gdHJ1ZSkge1xuICAgICAgc2V0QW5jaG9yRWwocHJveHkuJGVsLnBhcmVudE5vZGUpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGV0IGVsID0gcHJvcHMudGFyZ2V0XG5cbiAgICAgIGlmICh0eXBlb2YgcHJvcHMudGFyZ2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9wcy50YXJnZXQpXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgIGVsID0gdm9pZCAwXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGVsICE9PSB2b2lkIDAgJiYgZWwgIT09IG51bGwpIHtcbiAgICAgICAgYW5jaG9yRWwudmFsdWUgPSBlbC4kZWwgfHwgZWxcbiAgICAgICAgY29uZmlndXJlQW5jaG9yRWwoKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGFuY2hvckVsLnZhbHVlID0gbnVsbFxuICAgICAgICBjb25zb2xlLmVycm9yKGBBbmNob3I6IHRhcmdldCBcIiR7IHByb3BzLnRhcmdldCB9XCIgbm90IGZvdW5kYClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB3YXRjaCgoKSA9PiBwcm9wcy5jb250ZXh0TWVudSwgdmFsID0+IHtcbiAgICBpZiAoYW5jaG9yRWwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgIHVuY29uZmlndXJlQW5jaG9yRWwoKVxuICAgICAgY29uZmlndXJlQW5jaG9yRWwodmFsKVxuICAgIH1cbiAgfSlcblxuICB3YXRjaCgoKSA9PiBwcm9wcy50YXJnZXQsICgpID0+IHtcbiAgICBpZiAoYW5jaG9yRWwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgIHVuY29uZmlndXJlQW5jaG9yRWwoKVxuICAgIH1cblxuICAgIHBpY2tBbmNob3JFbCgpXG4gIH0pXG5cbiAgd2F0Y2goKCkgPT4gcHJvcHMubm9QYXJlbnRFdmVudCwgdmFsID0+IHtcbiAgICBpZiAoYW5jaG9yRWwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgICAgdW5jb25maWd1cmVBbmNob3JFbCgpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uZmlndXJlQW5jaG9yRWwoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgIHBpY2tBbmNob3JFbCgpXG5cbiAgICBpZiAoYXZvaWRFbWl0ICE9PSB0cnVlICYmIHByb3BzLm1vZGVsVmFsdWUgPT09IHRydWUgJiYgYW5jaG9yRWwudmFsdWUgPT09IG51bGwpIHtcbiAgICAgIGVtaXQoJ3VwZGF0ZTptb2RlbFZhbHVlJywgZmFsc2UpXG4gICAgfVxuICB9KVxuXG4gIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRvdWNoVGltZXIpXG4gICAgdW5jb25maWd1cmVBbmNob3JFbCgpXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBhbmNob3JFbCxcbiAgICBjYW5TaG93LFxuICAgIGFuY2hvckV2ZW50c1xuICB9XG59XG4iLCJpbXBvcnQgeyByZWYsIHdhdGNoLCBvbkJlZm9yZVVubW91bnQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB7IGxpc3Rlbk9wdHMgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKFxuICBwcm9wcyxcbiAgY29uZmlndXJlU2Nyb2xsVGFyZ2V0XG4pIHtcbiAgY29uc3QgbG9jYWxTY3JvbGxUYXJnZXQgPSByZWYobnVsbClcbiAgbGV0IHNjcm9sbEZuXG5cbiAgZnVuY3Rpb24gY2hhbmdlU2Nyb2xsRXZlbnQgKHNjcm9sbFRhcmdldCwgZm4pIHtcbiAgICBjb25zdCBmblByb3AgPSBgJHsgZm4gIT09IHZvaWQgMCA/ICdhZGQnIDogJ3JlbW92ZScgfUV2ZW50TGlzdGVuZXJgXG4gICAgY29uc3QgZm5IYW5kbGVyID0gZm4gIT09IHZvaWQgMCA/IGZuIDogc2Nyb2xsRm5cblxuICAgIGlmIChzY3JvbGxUYXJnZXQgIT09IHdpbmRvdykge1xuICAgICAgc2Nyb2xsVGFyZ2V0WyBmblByb3AgXSgnc2Nyb2xsJywgZm5IYW5kbGVyLCBsaXN0ZW5PcHRzLnBhc3NpdmUpXG4gICAgfVxuXG4gICAgd2luZG93WyBmblByb3AgXSgnc2Nyb2xsJywgZm5IYW5kbGVyLCBsaXN0ZW5PcHRzLnBhc3NpdmUpXG5cbiAgICBzY3JvbGxGbiA9IGZuXG4gIH1cblxuICBmdW5jdGlvbiB1bmNvbmZpZ3VyZVNjcm9sbFRhcmdldCAoKSB7XG4gICAgaWYgKGxvY2FsU2Nyb2xsVGFyZ2V0LnZhbHVlICE9PSBudWxsKSB7XG4gICAgICBjaGFuZ2VTY3JvbGxFdmVudChsb2NhbFNjcm9sbFRhcmdldC52YWx1ZSlcbiAgICAgIGxvY2FsU2Nyb2xsVGFyZ2V0LnZhbHVlID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG5vUGFyZW50RXZlbnRXYXRjaGVyID0gd2F0Y2goKCkgPT4gcHJvcHMubm9QYXJlbnRFdmVudCwgKCkgPT4ge1xuICAgIGlmIChsb2NhbFNjcm9sbFRhcmdldC52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdW5jb25maWd1cmVTY3JvbGxUYXJnZXQoKVxuICAgICAgY29uZmlndXJlU2Nyb2xsVGFyZ2V0KClcbiAgICB9XG4gIH0pXG5cbiAgb25CZWZvcmVVbm1vdW50KG5vUGFyZW50RXZlbnRXYXRjaGVyKVxuXG4gIHJldHVybiB7XG4gICAgbG9jYWxTY3JvbGxUYXJnZXQsXG4gICAgdW5jb25maWd1cmVTY3JvbGxUYXJnZXQsXG4gICAgY2hhbmdlU2Nyb2xsRXZlbnRcbiAgfVxufVxuIiwiaW1wb3J0IHsgZ2xvYmFsQ29uZmlnIH0gZnJvbSAnLi9nbG9iYWwtY29uZmlnLmpzJ1xuXG5jb25zdCBnbG9iYWxOb2RlcyA9IFtdXG5sZXQgdGFyZ2V0ID0gX19RVUFTQVJfU1NSX1NFUlZFUl9fXG4gID8gdm9pZCAwXG4gIDogZG9jdW1lbnQuYm9keVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR2xvYmFsTm9kZSAoaWQpIHtcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gIGlmIChpZCAhPT0gdm9pZCAwKSB7XG4gICAgZWwuaWQgPSBpZFxuICB9XG5cbiAgaWYgKGdsb2JhbENvbmZpZy5nbG9iYWxOb2RlcyAhPT0gdm9pZCAwKSB7XG4gICAgY29uc3QgY2xzID0gZ2xvYmFsQ29uZmlnLmdsb2JhbE5vZGVzLmNsYXNzXG4gICAgaWYgKGNscyAhPT0gdm9pZCAwKSB7XG4gICAgICBlbC5jbGFzc05hbWUgPSBjbHNcbiAgICB9XG4gIH1cblxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpXG4gIGdsb2JhbE5vZGVzLnB1c2goZWwpXG5cbiAgcmV0dXJuIGVsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVHbG9iYWxOb2RlIChlbCkge1xuICBnbG9iYWxOb2Rlcy5zcGxpY2UoZ2xvYmFsTm9kZXMuaW5kZXhPZihlbCksIDEpXG4gIGVsLnJlbW92ZSgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VHbG9iYWxOb2Rlc1RhcmdldCAoZWwpIHtcbiAgaWYgKGVsICE9PSB0YXJnZXQpIHtcbiAgICB0YXJnZXQgPSBlbFxuXG4gICAgZ2xvYmFsTm9kZXMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBpZiAoZWwuY29udGFpbnModGFyZ2V0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCB7IGdldFBhcmVudFZtIH0gZnJvbSAnLi92bS5qcydcblxuZXhwb3J0IGNvbnN0IHBvcnRhbExpc3QgPSBbXVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9ydGFsVm0gKGVsKSB7XG4gIHJldHVybiBwb3J0YWxMaXN0LmZpbmQodm0gPT5cbiAgICB2bS5fX3FQb3J0YWxJbm5lclJlZi52YWx1ZSAhPT0gbnVsbFxuICAgICYmIHZtLl9fcVBvcnRhbElubmVyUmVmLnZhbHVlLmNvbnRhaW5zKGVsKVxuICApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZVBvcnRhbE1lbnVzICh2bSwgZXZ0KSB7XG4gIGRvIHtcbiAgICBpZiAodm0uJG9wdGlvbnMubmFtZSA9PT0gJ1FNZW51Jykge1xuICAgICAgdm0uaGlkZShldnQpXG5cbiAgICAgIC8vIGlzIHRoaXMgYSBwb2ludCBvZiBzZXBhcmF0aW9uP1xuICAgICAgaWYgKHZtLiRwcm9wcy5zZXBhcmF0ZUNsb3NlUG9wdXAgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGdldFBhcmVudFZtKHZtKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh2bS5fX3FQb3J0YWxJbm5lclJlZiAhPT0gdm9pZCAwKSB7XG4gICAgICAvLyB0cmVhdCBpdCBhcyBwb2ludCBvZiBzZXBhcmF0aW9uIGlmIHBhcmVudCBpcyBRUG9wdXBQcm94eVxuICAgICAgLy8gKHNvIG1vYmlsZSBtYXRjaGVzIGRlc2t0b3AgYmVoYXZpb3IpXG4gICAgICAvLyBhbmQgaGlkZSBpdCB0b29cbiAgICAgIGNvbnN0IHBhcmVudCA9IGdldFBhcmVudFZtKHZtKVxuXG4gICAgICBpZiAocGFyZW50ICE9PSB2b2lkIDAgJiYgcGFyZW50LiRvcHRpb25zLm5hbWUgPT09ICdRUG9wdXBQcm94eScpIHtcbiAgICAgICAgdm0uaGlkZShldnQpXG4gICAgICAgIHJldHVybiBwYXJlbnRcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdm1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2bSA9IGdldFBhcmVudFZtKHZtKVxuICB9IHdoaWxlICh2bSAhPT0gdm9pZCAwICYmIHZtICE9PSBudWxsKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3J0YWxzICh2bSwgZXZ0LCBkZXB0aCkge1xuICB3aGlsZSAoZGVwdGggIT09IDAgJiYgdm0gIT09IHZvaWQgMCAmJiB2bSAhPT0gbnVsbCkge1xuICAgIGlmICh2bS5fX3FQb3J0YWxJbm5lclJlZiAhPT0gdm9pZCAwKSB7XG4gICAgICBkZXB0aC0tXG5cbiAgICAgIGlmICh2bS4kb3B0aW9ucy5uYW1lID09PSAnUU1lbnUnKSB7XG4gICAgICAgIHZtID0gY2xvc2VQb3J0YWxNZW51cyh2bSwgZXZ0KVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICB2bS5oaWRlKGV2dClcbiAgICB9XG5cbiAgICB2bSA9IGdldFBhcmVudFZtKHZtKVxuICB9XG59XG4iLCJpbXBvcnQgeyBoLCByZWYsIG9uVW5tb3VudGVkLCBUZWxlcG9ydCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50LmpzJ1xuaW1wb3J0IHsgYWRkRm9jdXNXYWl0RmxhZywgcmVtb3ZlRm9jdXNXYWl0RmxhZyB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvZm9jdXMtbWFuYWdlci5qcydcbmltcG9ydCB7IGNyZWF0ZUdsb2JhbE5vZGUsIHJlbW92ZUdsb2JhbE5vZGUgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2dsb2JhbC1ub2Rlcy5qcydcbmltcG9ydCB7IHBvcnRhbExpc3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3BvcnRhbC5qcydcblxuZnVuY3Rpb24gaXNPbkdsb2JhbERpYWxvZyAodm0pIHtcbiAgdm0gPSB2bS5wYXJlbnRcblxuICB3aGlsZSAodm0gIT09IHZvaWQgMCAmJiB2bSAhPT0gbnVsbCkge1xuICAgIGlmICh2bS50eXBlLm5hbWUgPT09ICdRR2xvYmFsRGlhbG9nJykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgaWYgKHZtLnR5cGUubmFtZSA9PT0gJ1FEaWFsb2cnIHx8IHZtLnR5cGUubmFtZSA9PT0gJ1FNZW51Jykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdm0gPSB2bS5wYXJlbnRcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG4vLyBXYXJuaW5nIVxuLy8gWW91IE1VU1Qgc3BlY2lmeSBcImluaGVyaXRBdHRyczogZmFsc2VcIiBpbiB5b3VyIGNvbXBvbmVudFxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAodm0sIGlubmVyUmVmLCByZW5kZXJQb3J0YWxDb250ZW50LCBjaGVja0dsb2JhbERpYWxvZykge1xuICBjb25zdCBwb3J0YWxJc0FjdGl2ZSA9IHJlZihmYWxzZSlcblxuICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcnRhbElzQWN0aXZlLFxuXG4gICAgICBzaG93UG9ydGFsOiBub29wLFxuICAgICAgaGlkZVBvcnRhbDogbm9vcCxcbiAgICAgIHJlbmRlclBvcnRhbDogbm9vcFxuICAgIH1cbiAgfVxuXG4gIGxldCBwb3J0YWxFbCA9IG51bGxcbiAgY29uc3QgZm9jdXNPYmogPSB7fVxuICBjb25zdCBvbkdsb2JhbERpYWxvZyA9IGNoZWNrR2xvYmFsRGlhbG9nID09PSB0cnVlICYmIGlzT25HbG9iYWxEaWFsb2codm0pXG5cbiAgZnVuY3Rpb24gc2hvd1BvcnRhbCAoaXNSZWFkeSkge1xuICAgIGlmIChpc1JlYWR5ID09PSB0cnVlKSB7XG4gICAgICByZW1vdmVGb2N1c1dhaXRGbGFnKGZvY3VzT2JqKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHBvcnRhbElzQWN0aXZlLnZhbHVlID09PSBmYWxzZSkge1xuICAgICAgaWYgKG9uR2xvYmFsRGlhbG9nID09PSBmYWxzZSAmJiBwb3J0YWxFbCA9PT0gbnVsbCkge1xuICAgICAgICBwb3J0YWxFbCA9IGNyZWF0ZUdsb2JhbE5vZGUoKVxuICAgICAgfVxuXG4gICAgICBwb3J0YWxJc0FjdGl2ZS52YWx1ZSA9IHRydWVcblxuICAgICAgLy8gcmVnaXN0ZXIgcG9ydGFsXG4gICAgICBwb3J0YWxMaXN0LnB1c2godm0ucHJveHkpXG5cbiAgICAgIGFkZEZvY3VzV2FpdEZsYWcoZm9jdXNPYmopXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGlkZVBvcnRhbCAoKSB7XG4gICAgcmVtb3ZlRm9jdXNXYWl0RmxhZyhmb2N1c09iailcbiAgICBwb3J0YWxJc0FjdGl2ZS52YWx1ZSA9IGZhbHNlXG5cbiAgICAvLyB1bnJlZ2lzdGVyIHBvcnRhbFxuICAgIGNvbnN0IGluZGV4ID0gcG9ydGFsTGlzdC5pbmRleE9mKHZtLnByb3h5KVxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICBwb3J0YWxMaXN0LnNwbGljZShpbmRleCwgMSlcbiAgICB9XG5cbiAgICBpZiAocG9ydGFsRWwgIT09IG51bGwpIHtcbiAgICAgIHJlbW92ZUdsb2JhbE5vZGUocG9ydGFsRWwpXG4gICAgICBwb3J0YWxFbCA9IG51bGxcbiAgICB9XG4gIH1cblxuICBvblVubW91bnRlZChoaWRlUG9ydGFsKVxuXG4gIC8vIGV4cG9zZSBwdWJsaWNseSBuZWVkZWQgc3R1ZmYgZm9yIHBvcnRhbCB1dGlsc1xuICBPYmplY3QuYXNzaWduKHZtLnByb3h5LCB7IF9fcVBvcnRhbElubmVyUmVmOiBpbm5lclJlZiB9KVxuXG4gIHJldHVybiB7XG4gICAgc2hvd1BvcnRhbCxcbiAgICBoaWRlUG9ydGFsLFxuXG4gICAgcG9ydGFsSXNBY3RpdmUsXG5cbiAgICByZW5kZXJQb3J0YWw6ICgpID0+IChcbiAgICAgIG9uR2xvYmFsRGlhbG9nID09PSB0cnVlXG4gICAgICAgID8gcmVuZGVyUG9ydGFsQ29udGVudCgpXG4gICAgICAgIDogKFxuICAgICAgICAgICAgcG9ydGFsSXNBY3RpdmUudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgICAgPyBbIGgoVGVsZXBvcnQsIHsgdG86IHBvcnRhbEVsIH0sIHJlbmRlclBvcnRhbENvbnRlbnQoKSkgXVxuICAgICAgICAgICAgICA6IHZvaWQgMFxuICAgICAgICAgIClcbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IHJlZiwgY29tcHV0ZWQsIHdhdGNoLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IHVzZVRyYW5zaXRpb25Qcm9wcyA9IHtcbiAgdHJhbnNpdGlvblNob3c6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ2ZhZGUnXG4gIH0sXG5cbiAgdHJhbnNpdGlvbkhpZGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ2ZhZGUnXG4gIH0sXG5cbiAgdHJhbnNpdGlvbkR1cmF0aW9uOiB7XG4gICAgdHlwZTogWyBTdHJpbmcsIE51bWJlciBdLFxuICAgIGRlZmF1bHQ6IDMwMFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcywgc2hvd2luZykge1xuICBjb25zdCB0cmFuc2l0aW9uU3RhdGUgPSByZWYoc2hvd2luZy52YWx1ZSlcblxuICB3YXRjaChzaG93aW5nLCB2YWwgPT4ge1xuICAgIG5leHRUaWNrKCgpID0+IHsgdHJhbnNpdGlvblN0YXRlLnZhbHVlID0gdmFsIH0pXG4gIH0pXG5cbiAgLy8gcmV0dXJuIHRyYW5zaXRpb25cbiAgcmV0dXJuIHtcbiAgICB0cmFuc2l0aW9uOiBjb21wdXRlZCgoKSA9PiAncS10cmFuc2l0aW9uLS0nICsgKFxuICAgICAgdHJhbnNpdGlvblN0YXRlLnZhbHVlID09PSB0cnVlID8gcHJvcHMudHJhbnNpdGlvbkhpZGUgOiBwcm9wcy50cmFuc2l0aW9uU2hvd1xuICAgICkpLFxuXG4gICAgdHJhbnNpdGlvblN0eWxlOiBjb21wdXRlZCgoKSA9PiBgLS1xLXRyYW5zaXRpb24tZHVyYXRpb246ICR7IHByb3BzLnRyYW5zaXRpb25EdXJhdGlvbiB9bXNgKVxuICB9XG59XG4iLCJpbXBvcnQgeyBuZXh0VGljaywgb25CZWZvcmVVbm1vdW50IH0gZnJvbSAndnVlJ1xuXG4vKlxuICogVXNhZ2U6XG4gKiAgICByZWdpc3RlclRpY2soZm4pXG4gKiAgICByZWdpc3RlclRpY2soZm4pXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xuICBsZXQgdGlja0ZuXG5cbiAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICB0aWNrRm4gPSB2b2lkIDBcbiAgfSlcblxuICByZXR1cm4ge1xuICAgIHJlZ2lzdGVyVGljayAoZm4pIHtcbiAgICAgIHRpY2tGbiA9IGZuXG5cbiAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgaWYgKHRpY2tGbiA9PT0gZm4pIHtcbiAgICAgICAgICB0aWNrRm4oKVxuICAgICAgICAgIHRpY2tGbiA9IHZvaWQgMFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0sXG5cbiAgICByZW1vdmVUaWNrICgpIHtcbiAgICAgIHRpY2tGbiA9IHZvaWQgMFxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgb25CZWZvcmVVbm1vdW50IH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG4gIGxldCB0aW1lclxuXG4gIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgcmVnaXN0ZXJUaW1lb3V0IChmbiwgZGVsYXkpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmbiwgZGVsYXkpXG4gICAgfSxcblxuICAgIHJlbW92ZVRpbWVvdXQgKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9QbGF0Zm9ybS5qcydcbmltcG9ydCB7IGlzS2V5Q29kZSB9IGZyb20gJy4va2V5LWNvbXBvc2l0aW9uLmpzJ1xuXG5jb25zdCBoYW5kbGVycyA9IFtdXG5sZXQgZXNjRG93blxuXG5mdW5jdGlvbiBvbktleWRvd24gKGV2dCkge1xuICBlc2NEb3duID0gZXZ0LmtleUNvZGUgPT09IDI3XG59XG5cbmZ1bmN0aW9uIG9uQmx1ciAoKSB7XG4gIGlmIChlc2NEb3duID09PSB0cnVlKSB7XG4gICAgZXNjRG93biA9IGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24gb25LZXl1cCAoZXZ0KSB7XG4gIGlmIChlc2NEb3duID09PSB0cnVlKSB7XG4gICAgZXNjRG93biA9IGZhbHNlXG5cbiAgICBpZiAoaXNLZXlDb2RlKGV2dCwgMjcpID09PSB0cnVlKSB7XG4gICAgICBoYW5kbGVyc1sgaGFuZGxlcnMubGVuZ3RoIC0gMSBdKGV2dClcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlIChhY3Rpb24pIHtcbiAgd2luZG93WyBhY3Rpb24gXSgna2V5ZG93bicsIG9uS2V5ZG93bilcbiAgd2luZG93WyBhY3Rpb24gXSgnYmx1cicsIG9uQmx1cilcbiAgd2luZG93WyBhY3Rpb24gXSgna2V5dXAnLCBvbktleXVwKVxuICBlc2NEb3duID0gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEVzY2FwZUtleSAoZm4pIHtcbiAgaWYgKGNsaWVudC5pcy5kZXNrdG9wID09PSB0cnVlKSB7XG4gICAgaGFuZGxlcnMucHVzaChmbilcblxuICAgIGlmIChoYW5kbGVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHVwZGF0ZSgnYWRkRXZlbnRMaXN0ZW5lcicpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFc2NhcGVLZXkgKGZuKSB7XG4gIGNvbnN0IGluZGV4ID0gaGFuZGxlcnMuaW5kZXhPZihmbilcbiAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICBpZiAoaGFuZGxlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICB1cGRhdGUoJ3JlbW92ZUV2ZW50TGlzdGVuZXInKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9QbGF0Zm9ybS5qcydcblxuY29uc3QgaGFuZGxlcnMgPSBbXVxuXG5mdW5jdGlvbiB0cmlnZ2VyIChlKSB7XG4gIGhhbmRsZXJzWyBoYW5kbGVycy5sZW5ndGggLSAxIF0oZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEZvY3Vzb3V0IChmbikge1xuICBpZiAoY2xpZW50LmlzLmRlc2t0b3AgPT09IHRydWUpIHtcbiAgICBoYW5kbGVycy5wdXNoKGZuKVxuXG4gICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdHJpZ2dlcilcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZvY3Vzb3V0IChmbikge1xuICBjb25zdCBpbmRleCA9IGhhbmRsZXJzLmluZGV4T2YoZm4pXG4gIGlmIChpbmRleCA+IC0xKSB7XG4gICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdHJpZ2dlcilcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IGxpc3Rlbk9wdHMgfSBmcm9tICcuLi9ldmVudC5qcydcbmltcG9ydCB7IHBvcnRhbExpc3QgfSBmcm9tICcuLi9wcml2YXRlL3BvcnRhbC5qcydcblxubGV0IHRpbWVyXG5cbmNvbnN0XG4gIHsgbm90UGFzc2l2ZUNhcHR1cmUgfSA9IGxpc3Rlbk9wdHMsXG4gIHJlZ2lzdGVyZWRMaXN0ID0gW11cblxuZnVuY3Rpb24gZ2xvYmFsSGFuZGxlciAoZXZ0KSB7XG4gIGNsZWFyVGltZW91dCh0aW1lcilcblxuICBjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0XG5cbiAgaWYgKFxuICAgIHRhcmdldCA9PT0gdm9pZCAwXG4gICAgfHwgdGFyZ2V0Lm5vZGVUeXBlID09PSA4XG4gICAgfHwgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbm8tcG9pbnRlci1ldmVudHMnKSA9PT0gdHJ1ZVxuICApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIGNoZWNrIGxhc3QgcG9ydGFsIHZtIGlmIGl0J3NcbiAgLy8gYSBRRGlhbG9nIGFuZCBub3QgaW4gc2VhbWxlc3MgbW9kZVxuICBsZXQgcG9ydGFsSW5kZXggPSBwb3J0YWxMaXN0Lmxlbmd0aCAtIDFcblxuICB3aGlsZSAocG9ydGFsSW5kZXggPj0gMCkge1xuICAgIGNvbnN0IHByb3h5ID0gcG9ydGFsTGlzdFsgcG9ydGFsSW5kZXggXS4kXG5cbiAgICBpZiAocHJveHkudHlwZS5uYW1lICE9PSAnUURpYWxvZycpIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKHByb3h5LnByb3BzLnNlYW1sZXNzICE9PSB0cnVlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBwb3J0YWxJbmRleC0tXG4gIH1cblxuICBmb3IgKGxldCBpID0gcmVnaXN0ZXJlZExpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjb25zdCBzdGF0ZSA9IHJlZ2lzdGVyZWRMaXN0WyBpIF1cblxuICAgIGlmIChcbiAgICAgIChcbiAgICAgICAgc3RhdGUuYW5jaG9yRWwudmFsdWUgPT09IG51bGxcbiAgICAgICAgfHwgc3RhdGUuYW5jaG9yRWwudmFsdWUuY29udGFpbnModGFyZ2V0KSA9PT0gZmFsc2VcbiAgICAgIClcbiAgICAgICYmIChcbiAgICAgICAgdGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5XG4gICAgICAgIHx8IChcbiAgICAgICAgICBzdGF0ZS5pbm5lclJlZi52YWx1ZSAhPT0gbnVsbFxuICAgICAgICAgICYmIHN0YXRlLmlubmVyUmVmLnZhbHVlLmNvbnRhaW5zKHRhcmdldCkgPT09IGZhbHNlXG4gICAgICAgIClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIC8vIG1hcmsgdGhlIGV2ZW50IGFzIGJlaW5nIHByb2Nlc3NlZCBieSBjbGlja091dHNpZGVcbiAgICAgIC8vIHVzZWQgdG8gcHJldmVudCByZWZvY3VzIGFmdGVyIG1lbnUgY2xvc2VcbiAgICAgIGV2dC5xQ2xpY2tPdXRzaWRlID0gdHJ1ZVxuICAgICAgc3RhdGUub25DbGlja091dHNpZGUoZXZ0KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xpY2tPdXRzaWRlIChjbGlja091dHNpZGVQcm9wcykge1xuICByZWdpc3RlcmVkTGlzdC5wdXNoKGNsaWNrT3V0c2lkZVByb3BzKVxuXG4gIGlmIChyZWdpc3RlcmVkTGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBnbG9iYWxIYW5kbGVyLCBub3RQYXNzaXZlQ2FwdHVyZSlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZ2xvYmFsSGFuZGxlciwgbm90UGFzc2l2ZUNhcHR1cmUpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNsaWNrT3V0c2lkZSAoY2xpY2tPdXRzaWRlUHJvcHMpIHtcbiAgY29uc3QgaW5kZXggPSByZWdpc3RlcmVkTGlzdC5maW5kSW5kZXgoaCA9PiBoID09PSBjbGlja091dHNpZGVQcm9wcylcblxuICBpZiAoaW5kZXggPiAtMSkge1xuICAgIHJlZ2lzdGVyZWRMaXN0LnNwbGljZShpbmRleCwgMSlcblxuICAgIGlmIChyZWdpc3RlcmVkTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGdsb2JhbEhhbmRsZXIsIG5vdFBhc3NpdmVDYXB0dXJlKVxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGdsb2JhbEhhbmRsZXIsIG5vdFBhc3NpdmVDYXB0dXJlKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2Nyb2xsYmFyV2lkdGggfSBmcm9tICcuLi9zY3JvbGwuanMnXG5pbXBvcnQgeyBjbGllbnQgfSBmcm9tICcuLi8uLi9wbHVnaW5zL1BsYXRmb3JtLmpzJ1xuXG5sZXQgdnBMZWZ0LCB2cFRvcFxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQb3NpdGlvbiAocG9zKSB7XG4gIGNvbnN0IHBhcnRzID0gcG9zLnNwbGl0KCcgJylcbiAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGlmIChbICd0b3AnLCAnY2VudGVyJywgJ2JvdHRvbScgXS5pbmNsdWRlcyhwYXJ0c1sgMCBdKSAhPT0gdHJ1ZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FuY2hvci9TZWxmIHBvc2l0aW9uIG11c3Qgc3RhcnQgd2l0aCBvbmUgb2YgdG9wL2NlbnRlci9ib3R0b20nKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGlmIChbICdsZWZ0JywgJ21pZGRsZScsICdyaWdodCcsICdzdGFydCcsICdlbmQnIF0uaW5jbHVkZXMocGFydHNbIDEgXSkgIT09IHRydWUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBbmNob3IvU2VsZiBwb3NpdGlvbiBtdXN0IGVuZCB3aXRoIG9uZSBvZiBsZWZ0L21pZGRsZS9yaWdodC9zdGFydC9lbmQnKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU9mZnNldCAodmFsKSB7XG4gIGlmICghdmFsKSB7IHJldHVybiB0cnVlIH1cbiAgaWYgKHZhbC5sZW5ndGggIT09IDIpIHsgcmV0dXJuIGZhbHNlIH1cbiAgaWYgKHR5cGVvZiB2YWxbIDAgXSAhPT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbFsgMSBdICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmNvbnN0IGhvcml6b250YWxQb3MgPSB7XG4gICdzdGFydCNsdHInOiAnbGVmdCcsXG4gICdzdGFydCNydGwnOiAncmlnaHQnLFxuICAnZW5kI2x0cic6ICdyaWdodCcsXG4gICdlbmQjcnRsJzogJ2xlZnQnXG59XG5cbjtbICdsZWZ0JywgJ21pZGRsZScsICdyaWdodCcgXS5mb3JFYWNoKHBvcyA9PiB7XG4gIGhvcml6b250YWxQb3NbIGAkeyBwb3MgfSNsdHJgIF0gPSBwb3NcbiAgaG9yaXpvbnRhbFBvc1sgYCR7IHBvcyB9I3J0bGAgXSA9IHBvc1xufSlcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUG9zaXRpb24gKHBvcywgcnRsKSB7XG4gIGNvbnN0IHBhcnRzID0gcG9zLnNwbGl0KCcgJylcbiAgcmV0dXJuIHtcbiAgICB2ZXJ0aWNhbDogcGFydHNbIDAgXSxcbiAgICBob3Jpem9udGFsOiBob3Jpem9udGFsUG9zWyBgJHsgcGFydHNbIDEgXSB9IyR7IHJ0bCA9PT0gdHJ1ZSA/ICdydGwnIDogJ2x0cicgfWAgXVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNvdmVyICh2YWwpIHtcbiAgaWYgKHZhbCA9PT0gdHJ1ZSB8fCB2YWwgPT09IGZhbHNlKSB7IHJldHVybiB0cnVlIH1cbiAgcmV0dXJuIHZhbGlkYXRlUG9zaXRpb24odmFsKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5jaG9yUHJvcHMgKGVsLCBvZmZzZXQpIHtcbiAgbGV0IHsgdG9wLCBsZWZ0LCByaWdodCwgYm90dG9tLCB3aWR0aCwgaGVpZ2h0IH0gPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gIGlmIChvZmZzZXQgIT09IHZvaWQgMCkge1xuICAgIHRvcCAtPSBvZmZzZXRbIDEgXVxuICAgIGxlZnQgLT0gb2Zmc2V0WyAwIF1cbiAgICBib3R0b20gKz0gb2Zmc2V0WyAxIF1cbiAgICByaWdodCArPSBvZmZzZXRbIDAgXVxuXG4gICAgd2lkdGggKz0gb2Zmc2V0WyAwIF1cbiAgICBoZWlnaHQgKz0gb2Zmc2V0WyAxIF1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdG9wLFxuICAgIGxlZnQsXG4gICAgcmlnaHQsXG4gICAgYm90dG9tLFxuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBtaWRkbGU6IGxlZnQgKyAocmlnaHQgLSBsZWZ0KSAvIDIsXG4gICAgY2VudGVyOiB0b3AgKyAoYm90dG9tIC0gdG9wKSAvIDJcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFyZ2V0UHJvcHMgKGVsKSB7XG4gIHJldHVybiB7XG4gICAgdG9wOiAwLFxuICAgIGNlbnRlcjogZWwub2Zmc2V0SGVpZ2h0IC8gMixcbiAgICBib3R0b206IGVsLm9mZnNldEhlaWdodCxcbiAgICBsZWZ0OiAwLFxuICAgIG1pZGRsZTogZWwub2Zmc2V0V2lkdGggLyAyLFxuICAgIHJpZ2h0OiBlbC5vZmZzZXRXaWR0aFxuICB9XG59XG5cbi8vIGNmZzogeyBlbCwgYW5jaG9yRWwsIGFuY2hvck9yaWdpbiwgc2VsZk9yaWdpbiwgb2Zmc2V0LCBhYnNvbHV0ZU9mZnNldCwgY292ZXIsIGZpdCwgbWF4SGVpZ2h0LCBtYXhXaWR0aCB9XG5leHBvcnQgZnVuY3Rpb24gc2V0UG9zaXRpb24gKGNmZykge1xuICBpZiAoY2xpZW50LmlzLmlvcyA9PT0gdHJ1ZSAmJiB3aW5kb3cudmlzdWFsVmlld3BvcnQgIT09IHZvaWQgMCkge1xuICAgIC8vIHVzZXMgdGhlIHEtcG9zaXRpb24tZW5naW5lIENTUyBjbGFzc1xuXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5ib2R5LnN0eWxlXG4gICAgY29uc3QgeyBvZmZzZXRMZWZ0OiBsZWZ0LCBvZmZzZXRUb3A6IHRvcCB9ID0gd2luZG93LnZpc3VhbFZpZXdwb3J0XG5cbiAgICBpZiAobGVmdCAhPT0gdnBMZWZ0KSB7XG4gICAgICBlbC5zZXRQcm9wZXJ0eSgnLS1xLXBlLWxlZnQnLCBsZWZ0ICsgJ3B4JylcbiAgICAgIHZwTGVmdCA9IGxlZnRcbiAgICB9XG4gICAgaWYgKHRvcCAhPT0gdnBUb3ApIHtcbiAgICAgIGVsLnNldFByb3BlcnR5KCctLXEtcGUtdG9wJywgdG9wICsgJ3B4JylcbiAgICAgIHZwVG9wID0gdG9wXG4gICAgfVxuICB9XG5cbiAgbGV0IGFuY2hvclByb3BzXG5cbiAgLy8gc2Nyb2xsIHBvc2l0aW9uIG1pZ2h0IGNoYW5nZVxuICAvLyBpZiBtYXgtaGVpZ2h0Ly13aWR0aCBjaGFuZ2VzLCBzbyB3ZVxuICAvLyBuZWVkIHRvIHJlc3RvcmUgaXQgYWZ0ZXIgd2UgY2FsY3VsYXRlXG4gIC8vIHRoZSBuZXcgcG9zaXRpb25pbmdcbiAgY29uc3QgeyBzY3JvbGxMZWZ0LCBzY3JvbGxUb3AgfSA9IGNmZy5lbFxuXG4gIGlmIChjZmcuYWJzb2x1dGVPZmZzZXQgPT09IHZvaWQgMCkge1xuICAgIGFuY2hvclByb3BzID0gZ2V0QW5jaG9yUHJvcHMoY2ZnLmFuY2hvckVsLCBjZmcuY292ZXIgPT09IHRydWUgPyBbIDAsIDAgXSA6IGNmZy5vZmZzZXQpXG4gIH1cbiAgZWxzZSB7XG4gICAgY29uc3RcbiAgICAgIHsgdG9wOiBhbmNob3JUb3AsIGxlZnQ6IGFuY2hvckxlZnQgfSA9IGNmZy5hbmNob3JFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgIHRvcCA9IGFuY2hvclRvcCArIGNmZy5hYnNvbHV0ZU9mZnNldC50b3AsXG4gICAgICBsZWZ0ID0gYW5jaG9yTGVmdCArIGNmZy5hYnNvbHV0ZU9mZnNldC5sZWZ0XG5cbiAgICBhbmNob3JQcm9wcyA9IHsgdG9wLCBsZWZ0LCB3aWR0aDogMSwgaGVpZ2h0OiAxLCByaWdodDogbGVmdCArIDEsIGNlbnRlcjogdG9wLCBtaWRkbGU6IGxlZnQsIGJvdHRvbTogdG9wICsgMSB9XG4gIH1cblxuICBsZXQgZWxTdHlsZSA9IHtcbiAgICBtYXhIZWlnaHQ6IGNmZy5tYXhIZWlnaHQsXG4gICAgbWF4V2lkdGg6IGNmZy5tYXhXaWR0aCxcbiAgICB2aXNpYmlsaXR5OiAndmlzaWJsZSdcbiAgfVxuXG4gIGlmIChjZmcuZml0ID09PSB0cnVlIHx8IGNmZy5jb3ZlciA9PT0gdHJ1ZSkge1xuICAgIGVsU3R5bGUubWluV2lkdGggPSBhbmNob3JQcm9wcy53aWR0aCArICdweCdcbiAgICBpZiAoY2ZnLmNvdmVyID09PSB0cnVlKSB7XG4gICAgICBlbFN0eWxlLm1pbkhlaWdodCA9IGFuY2hvclByb3BzLmhlaWdodCArICdweCdcbiAgICB9XG4gIH1cblxuICBPYmplY3QuYXNzaWduKGNmZy5lbC5zdHlsZSwgZWxTdHlsZSlcblxuICBjb25zdFxuICAgIHRhcmdldFByb3BzID0gZ2V0VGFyZ2V0UHJvcHMoY2ZnLmVsKSxcbiAgICBwcm9wcyA9IHtcbiAgICAgIHRvcDogYW5jaG9yUHJvcHNbIGNmZy5hbmNob3JPcmlnaW4udmVydGljYWwgXSAtIHRhcmdldFByb3BzWyBjZmcuc2VsZk9yaWdpbi52ZXJ0aWNhbCBdLFxuICAgICAgbGVmdDogYW5jaG9yUHJvcHNbIGNmZy5hbmNob3JPcmlnaW4uaG9yaXpvbnRhbCBdIC0gdGFyZ2V0UHJvcHNbIGNmZy5zZWxmT3JpZ2luLmhvcml6b250YWwgXVxuICAgIH1cblxuICBhcHBseUJvdW5kYXJpZXMocHJvcHMsIGFuY2hvclByb3BzLCB0YXJnZXRQcm9wcywgY2ZnLmFuY2hvck9yaWdpbiwgY2ZnLnNlbGZPcmlnaW4pXG5cbiAgZWxTdHlsZSA9IHtcbiAgICB0b3A6IHByb3BzLnRvcCArICdweCcsXG4gICAgbGVmdDogcHJvcHMubGVmdCArICdweCdcbiAgfVxuXG4gIGlmIChwcm9wcy5tYXhIZWlnaHQgIT09IHZvaWQgMCkge1xuICAgIGVsU3R5bGUubWF4SGVpZ2h0ID0gcHJvcHMubWF4SGVpZ2h0ICsgJ3B4J1xuXG4gICAgaWYgKGFuY2hvclByb3BzLmhlaWdodCA+IHByb3BzLm1heEhlaWdodCkge1xuICAgICAgZWxTdHlsZS5taW5IZWlnaHQgPSBlbFN0eWxlLm1heEhlaWdodFxuICAgIH1cbiAgfVxuICBpZiAocHJvcHMubWF4V2lkdGggIT09IHZvaWQgMCkge1xuICAgIGVsU3R5bGUubWF4V2lkdGggPSBwcm9wcy5tYXhXaWR0aCArICdweCdcblxuICAgIGlmIChhbmNob3JQcm9wcy53aWR0aCA+IHByb3BzLm1heFdpZHRoKSB7XG4gICAgICBlbFN0eWxlLm1pbldpZHRoID0gZWxTdHlsZS5tYXhXaWR0aFxuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24oY2ZnLmVsLnN0eWxlLCBlbFN0eWxlKVxuXG4gIC8vIHJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uXG4gIGlmIChjZmcuZWwuc2Nyb2xsVG9wICE9PSBzY3JvbGxUb3ApIHtcbiAgICBjZmcuZWwuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wXG4gIH1cbiAgaWYgKGNmZy5lbC5zY3JvbGxMZWZ0ICE9PSBzY3JvbGxMZWZ0KSB7XG4gICAgY2ZnLmVsLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlCb3VuZGFyaWVzIChwcm9wcywgYW5jaG9yUHJvcHMsIHRhcmdldFByb3BzLCBhbmNob3JPcmlnaW4sIHNlbGZPcmlnaW4pIHtcbiAgY29uc3RcbiAgICBjdXJyZW50SGVpZ2h0ID0gdGFyZ2V0UHJvcHMuYm90dG9tLFxuICAgIGN1cnJlbnRXaWR0aCA9IHRhcmdldFByb3BzLnJpZ2h0LFxuICAgIG1hcmdpbiA9IGdldFNjcm9sbGJhcldpZHRoKCksXG4gICAgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBtYXJnaW4sXG4gICAgaW5uZXJXaWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGhcblxuICBpZiAocHJvcHMudG9wIDwgMCB8fCBwcm9wcy50b3AgKyBjdXJyZW50SGVpZ2h0ID4gaW5uZXJIZWlnaHQpIHtcbiAgICBpZiAoc2VsZk9yaWdpbi52ZXJ0aWNhbCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIHByb3BzLnRvcCA9IGFuY2hvclByb3BzWyBhbmNob3JPcmlnaW4udmVydGljYWwgXSA+IGlubmVySGVpZ2h0IC8gMlxuICAgICAgICA/IE1hdGgubWF4KDAsIGlubmVySGVpZ2h0IC0gY3VycmVudEhlaWdodClcbiAgICAgICAgOiAwXG4gICAgICBwcm9wcy5tYXhIZWlnaHQgPSBNYXRoLm1pbihjdXJyZW50SGVpZ2h0LCBpbm5lckhlaWdodClcbiAgICB9XG4gICAgZWxzZSBpZiAoYW5jaG9yUHJvcHNbIGFuY2hvck9yaWdpbi52ZXJ0aWNhbCBdID4gaW5uZXJIZWlnaHQgLyAyKSB7XG4gICAgICBjb25zdCBhbmNob3JZID0gTWF0aC5taW4oXG4gICAgICAgIGlubmVySGVpZ2h0LFxuICAgICAgICBhbmNob3JPcmlnaW4udmVydGljYWwgPT09ICdjZW50ZXInXG4gICAgICAgICAgPyBhbmNob3JQcm9wcy5jZW50ZXJcbiAgICAgICAgICA6IChhbmNob3JPcmlnaW4udmVydGljYWwgPT09IHNlbGZPcmlnaW4udmVydGljYWwgPyBhbmNob3JQcm9wcy5ib3R0b20gOiBhbmNob3JQcm9wcy50b3ApXG4gICAgICApXG4gICAgICBwcm9wcy5tYXhIZWlnaHQgPSBNYXRoLm1pbihjdXJyZW50SGVpZ2h0LCBhbmNob3JZKVxuICAgICAgcHJvcHMudG9wID0gTWF0aC5tYXgoMCwgYW5jaG9yWSAtIGN1cnJlbnRIZWlnaHQpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcHJvcHMudG9wID0gTWF0aC5tYXgoMCwgYW5jaG9yT3JpZ2luLnZlcnRpY2FsID09PSAnY2VudGVyJ1xuICAgICAgICA/IGFuY2hvclByb3BzLmNlbnRlclxuICAgICAgICA6IChhbmNob3JPcmlnaW4udmVydGljYWwgPT09IHNlbGZPcmlnaW4udmVydGljYWwgPyBhbmNob3JQcm9wcy50b3AgOiBhbmNob3JQcm9wcy5ib3R0b20pXG4gICAgICApXG4gICAgICBwcm9wcy5tYXhIZWlnaHQgPSBNYXRoLm1pbihjdXJyZW50SGVpZ2h0LCBpbm5lckhlaWdodCAtIHByb3BzLnRvcClcbiAgICB9XG4gIH1cblxuICBpZiAocHJvcHMubGVmdCA8IDAgfHwgcHJvcHMubGVmdCArIGN1cnJlbnRXaWR0aCA+IGlubmVyV2lkdGgpIHtcbiAgICBwcm9wcy5tYXhXaWR0aCA9IE1hdGgubWluKGN1cnJlbnRXaWR0aCwgaW5uZXJXaWR0aClcbiAgICBpZiAoc2VsZk9yaWdpbi5ob3Jpem9udGFsID09PSAnbWlkZGxlJykge1xuICAgICAgcHJvcHMubGVmdCA9IGFuY2hvclByb3BzWyBhbmNob3JPcmlnaW4uaG9yaXpvbnRhbCBdID4gaW5uZXJXaWR0aCAvIDJcbiAgICAgICAgPyBNYXRoLm1heCgwLCBpbm5lcldpZHRoIC0gY3VycmVudFdpZHRoKVxuICAgICAgICA6IDBcbiAgICB9XG4gICAgZWxzZSBpZiAoYW5jaG9yUHJvcHNbIGFuY2hvck9yaWdpbi5ob3Jpem9udGFsIF0gPiBpbm5lcldpZHRoIC8gMikge1xuICAgICAgY29uc3QgYW5jaG9yWCA9IE1hdGgubWluKFxuICAgICAgICBpbm5lcldpZHRoLFxuICAgICAgICBhbmNob3JPcmlnaW4uaG9yaXpvbnRhbCA9PT0gJ21pZGRsZSdcbiAgICAgICAgICA/IGFuY2hvclByb3BzLm1pZGRsZVxuICAgICAgICAgIDogKGFuY2hvck9yaWdpbi5ob3Jpem9udGFsID09PSBzZWxmT3JpZ2luLmhvcml6b250YWwgPyBhbmNob3JQcm9wcy5yaWdodCA6IGFuY2hvclByb3BzLmxlZnQpXG4gICAgICApXG4gICAgICBwcm9wcy5tYXhXaWR0aCA9IE1hdGgubWluKGN1cnJlbnRXaWR0aCwgYW5jaG9yWClcbiAgICAgIHByb3BzLmxlZnQgPSBNYXRoLm1heCgwLCBhbmNob3JYIC0gcHJvcHMubWF4V2lkdGgpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcHJvcHMubGVmdCA9IE1hdGgubWF4KDAsIGFuY2hvck9yaWdpbi5ob3Jpem9udGFsID09PSAnbWlkZGxlJ1xuICAgICAgICA/IGFuY2hvclByb3BzLm1pZGRsZVxuICAgICAgICA6IChhbmNob3JPcmlnaW4uaG9yaXpvbnRhbCA9PT0gc2VsZk9yaWdpbi5ob3Jpem9udGFsID8gYW5jaG9yUHJvcHMubGVmdCA6IGFuY2hvclByb3BzLnJpZ2h0KVxuICAgICAgKVxuICAgICAgcHJvcHMubWF4V2lkdGggPSBNYXRoLm1pbihjdXJyZW50V2lkdGgsIGlubmVyV2lkdGggLSBwcm9wcy5sZWZ0KVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgd2F0Y2gsIFRyYW5zaXRpb24sIG9uQmVmb3JlVW5tb3VudCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlQW5jaG9yLCB7IHVzZUFuY2hvclByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtYW5jaG9yLmpzJ1xuaW1wb3J0IHVzZVNjcm9sbFRhcmdldCBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1zY3JvbGwtdGFyZ2V0LmpzJ1xuaW1wb3J0IHVzZU1vZGVsVG9nZ2xlLCB7IHVzZU1vZGVsVG9nZ2xlUHJvcHMsIHVzZU1vZGVsVG9nZ2xlRW1pdHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1tb2RlbC10b2dnbGUuanMnXG5pbXBvcnQgdXNlRGFyaywgeyB1c2VEYXJrUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1kYXJrLmpzJ1xuaW1wb3J0IHVzZVBvcnRhbCBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1wb3J0YWwuanMnXG5pbXBvcnQgdXNlVHJhbnNpdGlvbiwgeyB1c2VUcmFuc2l0aW9uUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS10cmFuc2l0aW9uLmpzJ1xuaW1wb3J0IHVzZVRpY2sgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtdGljay5qcydcbmltcG9ydCB1c2VUaW1lb3V0IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXRpbWVvdXQuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgY2xvc2VQb3J0YWxNZW51cyB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvcG9ydGFsLmpzJ1xuaW1wb3J0IHsgZ2V0U2Nyb2xsVGFyZ2V0IH0gZnJvbSAnLi4vLi4vdXRpbHMvc2Nyb2xsLmpzJ1xuaW1wb3J0IHsgcG9zaXRpb24sIHN0b3BBbmRQcmV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBoU2xvdCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvcmVuZGVyLmpzJ1xuaW1wb3J0IHsgYWRkRXNjYXBlS2V5LCByZW1vdmVFc2NhcGVLZXkgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2VzY2FwZS1rZXkuanMnXG5pbXBvcnQgeyBhZGRGb2N1c291dCwgcmVtb3ZlRm9jdXNvdXQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2ZvY3Vzb3V0LmpzJ1xuaW1wb3J0IHsgY2hpbGRIYXNGb2N1cyB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbS5qcydcbmltcG9ydCB7IGFkZENsaWNrT3V0c2lkZSwgcmVtb3ZlQ2xpY2tPdXRzaWRlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9jbGljay1vdXRzaWRlLmpzJ1xuaW1wb3J0IHsgYWRkRm9jdXNGbiB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvZm9jdXMtbWFuYWdlci5qcydcblxuaW1wb3J0IHtcbiAgdmFsaWRhdGVQb3NpdGlvbiwgdmFsaWRhdGVPZmZzZXQsIHNldFBvc2l0aW9uLCBwYXJzZVBvc2l0aW9uXG59IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvcG9zaXRpb24tZW5naW5lLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUU1lbnUnLFxuXG4gIGluaGVyaXRBdHRyczogZmFsc2UsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VBbmNob3JQcm9wcyxcbiAgICAuLi51c2VNb2RlbFRvZ2dsZVByb3BzLFxuICAgIC4uLnVzZURhcmtQcm9wcyxcbiAgICAuLi51c2VUcmFuc2l0aW9uUHJvcHMsXG5cbiAgICBwZXJzaXN0ZW50OiBCb29sZWFuLFxuICAgIGF1dG9DbG9zZTogQm9vbGVhbixcbiAgICBzZXBhcmF0ZUNsb3NlUG9wdXA6IEJvb2xlYW4sXG5cbiAgICBub1JvdXRlRGlzbWlzczogQm9vbGVhbixcbiAgICBub1JlZm9jdXM6IEJvb2xlYW4sXG4gICAgbm9Gb2N1czogQm9vbGVhbixcblxuICAgIGZpdDogQm9vbGVhbixcbiAgICBjb3ZlcjogQm9vbGVhbixcblxuICAgIHNxdWFyZTogQm9vbGVhbixcblxuICAgIGFuY2hvcjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBvc2l0aW9uXG4gICAgfSxcbiAgICBzZWxmOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUG9zaXRpb25cbiAgICB9LFxuICAgIG9mZnNldDoge1xuICAgICAgdHlwZTogQXJyYXksXG4gICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlT2Zmc2V0XG4gICAgfSxcblxuICAgIHNjcm9sbFRhcmdldDoge1xuICAgICAgZGVmYXVsdDogdm9pZCAwXG4gICAgfSxcblxuICAgIHRvdWNoUG9zaXRpb246IEJvb2xlYW4sXG5cbiAgICBtYXhIZWlnaHQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6IG51bGxcbiAgICB9LFxuICAgIG1heFdpZHRoOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiBudWxsXG4gICAgfVxuICB9LFxuXG4gIGVtaXRzOiBbXG4gICAgLi4udXNlTW9kZWxUb2dnbGVFbWl0cyxcbiAgICAnY2xpY2snLCAnZXNjYXBlLWtleSdcbiAgXSxcblxuICBzZXR1cCAocHJvcHMsIHsgc2xvdHMsIGVtaXQsIGF0dHJzIH0pIHtcbiAgICBsZXQgcmVmb2N1c1RhcmdldCA9IG51bGwsIGFic29sdXRlT2Zmc2V0LCB1bndhdGNoUG9zaXRpb24sIGF2b2lkQXV0b0Nsb3NlXG5cbiAgICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gICAgY29uc3QgeyBwcm94eSB9ID0gdm1cbiAgICBjb25zdCB7ICRxIH0gPSBwcm94eVxuXG4gICAgY29uc3QgaW5uZXJSZWYgPSByZWYobnVsbClcbiAgICBjb25zdCBzaG93aW5nID0gcmVmKGZhbHNlKVxuXG4gICAgY29uc3QgaGlkZU9uUm91dGVDaGFuZ2UgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgcHJvcHMucGVyc2lzdGVudCAhPT0gdHJ1ZVxuICAgICAgJiYgcHJvcHMubm9Sb3V0ZURpc21pc3MgIT09IHRydWVcbiAgICApXG5cbiAgICBjb25zdCBpc0RhcmsgPSB1c2VEYXJrKHByb3BzLCAkcSlcbiAgICBjb25zdCB7IHJlZ2lzdGVyVGljaywgcmVtb3ZlVGljayB9ID0gdXNlVGljaygpXG4gICAgY29uc3QgeyByZWdpc3RlclRpbWVvdXQsIHJlbW92ZVRpbWVvdXQgfSA9IHVzZVRpbWVvdXQoKVxuICAgIGNvbnN0IHsgdHJhbnNpdGlvbiwgdHJhbnNpdGlvblN0eWxlIH0gPSB1c2VUcmFuc2l0aW9uKHByb3BzLCBzaG93aW5nKVxuICAgIGNvbnN0IHsgbG9jYWxTY3JvbGxUYXJnZXQsIGNoYW5nZVNjcm9sbEV2ZW50LCB1bmNvbmZpZ3VyZVNjcm9sbFRhcmdldCB9ID0gdXNlU2Nyb2xsVGFyZ2V0KHByb3BzLCBjb25maWd1cmVTY3JvbGxUYXJnZXQpXG5cbiAgICBjb25zdCB7IGFuY2hvckVsLCBjYW5TaG93IH0gPSB1c2VBbmNob3IoeyBzaG93aW5nIH0pXG5cbiAgICBjb25zdCB7IGhpZGUgfSA9IHVzZU1vZGVsVG9nZ2xlKHtcbiAgICAgIHNob3dpbmcsIGNhblNob3csIGhhbmRsZVNob3csIGhhbmRsZUhpZGUsXG4gICAgICBoaWRlT25Sb3V0ZUNoYW5nZSxcbiAgICAgIHByb2Nlc3NPbk1vdW50OiB0cnVlXG4gICAgfSlcblxuICAgIGNvbnN0IHsgc2hvd1BvcnRhbCwgaGlkZVBvcnRhbCwgcmVuZGVyUG9ydGFsIH0gPSB1c2VQb3J0YWwodm0sIGlubmVyUmVmLCByZW5kZXJQb3J0YWxDb250ZW50KVxuXG4gICAgY29uc3QgY2xpY2tPdXRzaWRlUHJvcHMgPSB7XG4gICAgICBhbmNob3JFbCxcbiAgICAgIGlubmVyUmVmLFxuICAgICAgb25DbGlja091dHNpZGUgKGUpIHtcbiAgICAgICAgaWYgKHByb3BzLnBlcnNpc3RlbnQgIT09IHRydWUgJiYgc2hvd2luZy52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGhpZGUoZSlcblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIGFsd2F5cyBwcmV2ZW50IHRvdWNoIGV2ZW50XG4gICAgICAgICAgICBlLnR5cGUgPT09ICd0b3VjaHN0YXJ0J1xuICAgICAgICAgICAgLy8gcHJldmVudCBjbGljayBpZiBpdCdzIG9uIGEgZGlhbG9nIGJhY2tkcm9wXG4gICAgICAgICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3EtZGlhbG9nX19iYWNrZHJvcCcpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzdG9wQW5kUHJldmVudChlKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhbmNob3JPcmlnaW4gPSBjb21wdXRlZCgoKSA9PlxuICAgICAgcGFyc2VQb3NpdGlvbihcbiAgICAgICAgcHJvcHMuYW5jaG9yIHx8IChcbiAgICAgICAgICBwcm9wcy5jb3ZlciA9PT0gdHJ1ZSA/ICdjZW50ZXIgbWlkZGxlJyA6ICdib3R0b20gc3RhcnQnXG4gICAgICAgICksXG4gICAgICAgICRxLmxhbmcucnRsXG4gICAgICApXG4gICAgKVxuXG4gICAgY29uc3Qgc2VsZk9yaWdpbiA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLmNvdmVyID09PSB0cnVlXG4gICAgICAgID8gYW5jaG9yT3JpZ2luLnZhbHVlXG4gICAgICAgIDogcGFyc2VQb3NpdGlvbihwcm9wcy5zZWxmIHx8ICd0b3Agc3RhcnQnLCAkcS5sYW5nLnJ0bClcbiAgICApKVxuXG4gICAgY29uc3QgbWVudUNsYXNzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIChwcm9wcy5zcXVhcmUgPT09IHRydWUgPyAnIHEtbWVudS0tc3F1YXJlJyA6ICcnKVxuICAgICAgKyAoaXNEYXJrLnZhbHVlID09PSB0cnVlID8gJyBxLW1lbnUtLWRhcmsgcS1kYXJrJyA6ICcnKVxuICAgIClcblxuICAgIGNvbnN0IG9uRXZlbnRzID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgcHJvcHMuYXV0b0Nsb3NlID09PSB0cnVlXG4gICAgICAgID8geyBvbkNsaWNrOiBvbkF1dG9DbG9zZSB9XG4gICAgICAgIDoge31cbiAgICApKVxuXG4gICAgY29uc3QgaGFuZGxlc0ZvY3VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIHNob3dpbmcudmFsdWUgPT09IHRydWUgJiYgcHJvcHMucGVyc2lzdGVudCAhPT0gdHJ1ZVxuICAgIClcblxuICAgIHdhdGNoKGhhbmRsZXNGb2N1cywgdmFsID0+IHtcbiAgICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgICAgYWRkRXNjYXBlS2V5KG9uRXNjYXBlS2V5KVxuICAgICAgICBhZGRDbGlja091dHNpZGUoY2xpY2tPdXRzaWRlUHJvcHMpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVtb3ZlRXNjYXBlS2V5KG9uRXNjYXBlS2V5KVxuICAgICAgICByZW1vdmVDbGlja091dHNpZGUoY2xpY2tPdXRzaWRlUHJvcHMpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGZvY3VzICgpIHtcbiAgICAgIGFkZEZvY3VzRm4oKCkgPT4ge1xuICAgICAgICBsZXQgbm9kZSA9IGlubmVyUmVmLnZhbHVlXG5cbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIG5vZGUgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJ1thdXRvZm9jdXNdLCBbZGF0YS1hdXRvZm9jdXNdJykgfHwgbm9kZVxuICAgICAgICAgIG5vZGUuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlU2hvdyAoZXZ0KSB7XG4gICAgICByZW1vdmVUaWNrKClcbiAgICAgIHJlbW92ZVRpbWVvdXQoKVxuXG4gICAgICByZWZvY3VzVGFyZ2V0ID0gcHJvcHMubm9SZWZvY3VzID09PSBmYWxzZVxuICAgICAgICA/IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICAgICAgOiBudWxsXG5cbiAgICAgIGFkZEZvY3Vzb3V0KG9uRm9jdXNvdXQpXG5cbiAgICAgIHNob3dQb3J0YWwoKVxuICAgICAgY29uZmlndXJlU2Nyb2xsVGFyZ2V0KClcblxuICAgICAgYWJzb2x1dGVPZmZzZXQgPSB2b2lkIDBcblxuICAgICAgaWYgKGV2dCAhPT0gdm9pZCAwICYmIChwcm9wcy50b3VjaFBvc2l0aW9uIHx8IHByb3BzLmNvbnRleHRNZW51KSkge1xuICAgICAgICBjb25zdCBwb3MgPSBwb3NpdGlvbihldnQpXG5cbiAgICAgICAgaWYgKHBvcy5sZWZ0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBjb25zdCB7IHRvcCwgbGVmdCB9ID0gYW5jaG9yRWwudmFsdWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgICBhYnNvbHV0ZU9mZnNldCA9IHsgbGVmdDogcG9zLmxlZnQgLSBsZWZ0LCB0b3A6IHBvcy50b3AgLSB0b3AgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh1bndhdGNoUG9zaXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgICB1bndhdGNoUG9zaXRpb24gPSB3YXRjaChcbiAgICAgICAgICAoKSA9PiAkcS5zY3JlZW4ud2lkdGggKyAnfCcgKyAkcS5zY3JlZW4uaGVpZ2h0ICsgJ3wnICsgcHJvcHMuc2VsZiArICd8JyArIHByb3BzLmFuY2hvciArICd8JyArICRxLmxhbmcucnRsLFxuICAgICAgICAgIHVwZGF0ZVBvc2l0aW9uXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLm5vRm9jdXMgIT09IHRydWUpIHtcbiAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKClcbiAgICAgIH1cblxuICAgICAgcmVnaXN0ZXJUaWNrKCgpID0+IHtcbiAgICAgICAgdXBkYXRlUG9zaXRpb24oKVxuICAgICAgICBwcm9wcy5ub0ZvY3VzICE9PSB0cnVlICYmIGZvY3VzKClcbiAgICAgIH0pXG5cbiAgICAgIHJlZ2lzdGVyVGltZW91dCgoKSA9PiB7XG4gICAgICAgIC8vIHJlcXVpcmVkIGluIG9yZGVyIHRvIGF2b2lkIHRoZSBcImRvdWJsZS10YXAgbmVlZGVkXCIgaXNzdWVcbiAgICAgICAgaWYgKCRxLnBsYXRmb3JtLmlzLmlvcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIC8vIGlmIGF1dG8tY2xvc2UsIHRoZW4gdGhpcyBjbGljayBzaG91bGRcbiAgICAgICAgICAvLyBub3QgY2xvc2UgdGhlIG1lbnVcbiAgICAgICAgICBhdm9pZEF1dG9DbG9zZSA9IHByb3BzLmF1dG9DbG9zZVxuICAgICAgICAgIGlubmVyUmVmLnZhbHVlLmNsaWNrKClcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZVBvc2l0aW9uKClcbiAgICAgICAgc2hvd1BvcnRhbCh0cnVlKSAvLyBkb25lIHNob3dpbmcgcG9ydGFsXG4gICAgICAgIGVtaXQoJ3Nob3cnLCBldnQpXG4gICAgICB9LCBwcm9wcy50cmFuc2l0aW9uRHVyYXRpb24pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlSGlkZSAoZXZ0KSB7XG4gICAgICByZW1vdmVUaWNrKClcbiAgICAgIHJlbW92ZVRpbWVvdXQoKVxuXG4gICAgICBhbmNob3JDbGVhbnVwKHRydWUpXG5cbiAgICAgIGlmIChcbiAgICAgICAgcmVmb2N1c1RhcmdldCAhPT0gbnVsbFxuICAgICAgICAmJiAoXG4gICAgICAgICAgLy8gbWVudSB3YXMgaGlkZGVuIGZyb20gY29kZSBvciBFU0MgcGx1Z2luXG4gICAgICAgICAgZXZ0ID09PSB2b2lkIDBcbiAgICAgICAgICAvLyBtZW51IHdhcyBub3QgY2xvc2VkIGZyb20gYSBtb3VzZSBvciB0b3VjaCBjbGlja091dHNpZGVcbiAgICAgICAgICB8fCBldnQucUNsaWNrT3V0c2lkZSAhPT0gdHJ1ZVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmVmb2N1c1RhcmdldC5mb2N1cygpXG4gICAgICAgIHJlZm9jdXNUYXJnZXQgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIHJlZ2lzdGVyVGltZW91dCgoKSA9PiB7XG4gICAgICAgIGhpZGVQb3J0YWwoKVxuICAgICAgICBlbWl0KCdoaWRlJywgZXZ0KVxuICAgICAgfSwgcHJvcHMudHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFuY2hvckNsZWFudXAgKGhpZGluZykge1xuICAgICAgYWJzb2x1dGVPZmZzZXQgPSB2b2lkIDBcblxuICAgICAgaWYgKHVud2F0Y2hQb3NpdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHVud2F0Y2hQb3NpdGlvbigpXG4gICAgICAgIHVud2F0Y2hQb3NpdGlvbiA9IHZvaWQgMFxuICAgICAgfVxuXG4gICAgICBpZiAoaGlkaW5nID09PSB0cnVlIHx8IHNob3dpbmcudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgcmVtb3ZlRm9jdXNvdXQob25Gb2N1c291dClcbiAgICAgICAgdW5jb25maWd1cmVTY3JvbGxUYXJnZXQoKVxuICAgICAgICByZW1vdmVDbGlja091dHNpZGUoY2xpY2tPdXRzaWRlUHJvcHMpXG4gICAgICAgIHJlbW92ZUVzY2FwZUtleShvbkVzY2FwZUtleSlcbiAgICAgIH1cblxuICAgICAgaWYgKGhpZGluZyAhPT0gdHJ1ZSkge1xuICAgICAgICByZWZvY3VzVGFyZ2V0ID0gbnVsbFxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbmZpZ3VyZVNjcm9sbFRhcmdldCAoKSB7XG4gICAgICBpZiAoYW5jaG9yRWwudmFsdWUgIT09IG51bGwgfHwgcHJvcHMuc2Nyb2xsVGFyZ2V0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgbG9jYWxTY3JvbGxUYXJnZXQudmFsdWUgPSBnZXRTY3JvbGxUYXJnZXQoYW5jaG9yRWwudmFsdWUsIHByb3BzLnNjcm9sbFRhcmdldClcbiAgICAgICAgY2hhbmdlU2Nyb2xsRXZlbnQobG9jYWxTY3JvbGxUYXJnZXQudmFsdWUsIHVwZGF0ZVBvc2l0aW9uKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQXV0b0Nsb3NlIChlKSB7XG4gICAgICAvLyBpZiBhdXRvLWNsb3NlLCB0aGVuIHRoZSBpb3MgZG91YmxlLXRhcCBmaXggd2hpY2hcbiAgICAgIC8vIGlzc3VlcyBhIGNsaWNrIHNob3VsZCBub3QgY2xvc2UgdGhlIG1lbnVcbiAgICAgIGlmIChhdm9pZEF1dG9DbG9zZSAhPT0gdHJ1ZSkge1xuICAgICAgICBjbG9zZVBvcnRhbE1lbnVzKHByb3h5LCBlKVxuICAgICAgICBlbWl0KCdjbGljaycsIGUpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgYXZvaWRBdXRvQ2xvc2UgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uRm9jdXNvdXQgKGV2dCkge1xuICAgICAgLy8gdGhlIGZvY3VzIGlzIG5vdCBpbiBhIHZ1ZSBjaGlsZCBjb21wb25lbnRcbiAgICAgIGlmIChcbiAgICAgICAgaGFuZGxlc0ZvY3VzLnZhbHVlID09PSB0cnVlXG4gICAgICAgICYmIHByb3BzLm5vRm9jdXMgIT09IHRydWVcbiAgICAgICAgJiYgY2hpbGRIYXNGb2N1cyhpbm5lclJlZi52YWx1ZSwgZXZ0LnRhcmdldCkgIT09IHRydWVcbiAgICAgICkge1xuICAgICAgICBmb2N1cygpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Fc2NhcGVLZXkgKGV2dCkge1xuICAgICAgZW1pdCgnZXNjYXBlLWtleScpXG4gICAgICBoaWRlKGV2dClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVQb3NpdGlvbiAoKSB7XG4gICAgICBjb25zdCBlbCA9IGlubmVyUmVmLnZhbHVlXG5cbiAgICAgIGlmIChlbCA9PT0gbnVsbCB8fCBhbmNob3JFbC52YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgc2V0UG9zaXRpb24oe1xuICAgICAgICBlbCxcbiAgICAgICAgb2Zmc2V0OiBwcm9wcy5vZmZzZXQsXG4gICAgICAgIGFuY2hvckVsOiBhbmNob3JFbC52YWx1ZSxcbiAgICAgICAgYW5jaG9yT3JpZ2luOiBhbmNob3JPcmlnaW4udmFsdWUsXG4gICAgICAgIHNlbGZPcmlnaW46IHNlbGZPcmlnaW4udmFsdWUsXG4gICAgICAgIGFic29sdXRlT2Zmc2V0LFxuICAgICAgICBmaXQ6IHByb3BzLmZpdCxcbiAgICAgICAgY292ZXI6IHByb3BzLmNvdmVyLFxuICAgICAgICBtYXhIZWlnaHQ6IHByb3BzLm1heEhlaWdodCxcbiAgICAgICAgbWF4V2lkdGg6IHByb3BzLm1heFdpZHRoXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlclBvcnRhbENvbnRlbnQgKCkge1xuICAgICAgcmV0dXJuIGgoXG4gICAgICAgIFRyYW5zaXRpb24sXG4gICAgICAgIHsgbmFtZTogdHJhbnNpdGlvbi52YWx1ZSwgYXBwZWFyOiB0cnVlIH0sXG4gICAgICAgICgpID0+IChcbiAgICAgICAgICBzaG93aW5nLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICA/IGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgICAgICAgIHJlZjogaW5uZXJSZWYsXG4gICAgICAgICAgICAgIHRhYmluZGV4OiAtMSxcbiAgICAgICAgICAgICAgY2xhc3M6IFtcbiAgICAgICAgICAgICAgICAncS1tZW51IHEtcG9zaXRpb24tZW5naW5lIHNjcm9sbCcgKyBtZW51Q2xhc3MudmFsdWUsXG4gICAgICAgICAgICAgICAgYXR0cnMuY2xhc3NcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgc3R5bGU6IFtcbiAgICAgICAgICAgICAgICBhdHRycy5zdHlsZSxcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uU3R5bGUudmFsdWVcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgLi4ub25FdmVudHMudmFsdWVcbiAgICAgICAgICAgIH0sIGhTbG90KHNsb3RzLmRlZmF1bHQpKVxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgIClcbiAgICAgIClcbiAgICB9XG5cbiAgICBvbkJlZm9yZVVubW91bnQoYW5jaG9yQ2xlYW51cClcblxuICAgIC8vIGV4cG9zZSBwdWJsaWMgbWV0aG9kc1xuICAgIE9iamVjdC5hc3NpZ24ocHJveHksIHsgZm9jdXMsIHVwZGF0ZVBvc2l0aW9uIH0pXG5cbiAgICByZXR1cm4gcmVuZGVyUG9ydGFsXG4gIH1cbn0pXG4iXSwibmFtZXMiOlsiaGFuZGxlcnMiXSwibWFwcGluZ3MiOiIrMkJBRU8sYUFBMkIsQ0FDaEMsR0FBSSxPQUFPLGVBQWlCLE9BQVEsQ0FDbEMsS0FBTSxHQUFZLE9BQU8sYUFBYyxFQUN2QyxBQUFJLEVBQVUsUUFBVSxPQUN0QixFQUFVLE1BQU8sRUFFVixFQUFVLGtCQUFvQixRQUNyQyxHQUFVLGdCQUFpQixFQUMzQixHQUFTLEdBQUcsU0FBVyxJQUFRLEVBQVUsU0FBUyxTQUFTLGFBQWEsRUFFM0UsS0FDSSxBQUFJLFVBQVMsWUFBYyxRQUM5QixTQUFTLFVBQVUsTUFBTyxDQUU5QixDQ1ZPLEtBQU0sSUFBaUIsQ0FDNUIsT0FBUSxDQUNOLFFBQVMsRUFDVixFQUNELGNBQWUsUUFDZixZQUFhLE9BQ2YsRUFFZSxZQUFVLENBQ3ZCLFVBQ0EsWUFDQSxxQkFDQyxDQUNELEtBQU0sQ0FBRSxRQUFPLFFBQU8sUUFBUyxHQUFvQixFQUU3QyxFQUFXLEVBQUksSUFBSSxFQUV6QixHQUFJLEdBRUosV0FBa0IsRUFBSyxDQUVyQixNQUFPLEdBQVMsUUFBVSxLQUN0QixHQUNDLElBQVEsUUFBVSxFQUFJLFVBQVksUUFBVSxFQUFJ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
