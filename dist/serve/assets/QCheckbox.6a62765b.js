var N=Object.defineProperty,Q=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var q=(t,l,e)=>l in t?N(t,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[l]=e,v=(t,l)=>{for(var e in l||(l={}))D.call(l,e)&&q(t,e,l[e]);if(_)for(var e of _(l))K.call(l,e)&&q(t,e,l[e]);return t},k=(t,l)=>Q(t,R(l));import{e as M,b as H,d as L,a as J,c as G}from"./QCard.ba24e7ad.js";import{x as C,J as n,N as o,a0 as U,R as W,P as X,a3 as I,K as Y}from"./vendor.3fb54e24.js";import{a as Z,q as ee}from"./use-key-composition.9a07a52d.js";function te(t,l){const e=C(null),c=n(()=>t.disable!==!0?null:o("span",{ref:e,class:"no-outline",tabindex:-1}));function i(s){const r=l.value;s!==void 0&&s.type.indexOf("key")===0?r!==null&&document.activeElement!==r&&r.contains(document.activeElement)===!0&&r.focus():e.value!==null&&(s===void 0||r!==null&&r.contains(s.target)===!0)&&e.value.focus()}return{refocusTargetEl:c,refocusTarget:i}}var ae={xs:30,sm:35,md:40,lg:50,xl:60};const le=k(v(v(v({},L),J),Z),{modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]}),ne=["update:modelValue"];function oe(t,l){const{props:e,slots:c,emit:i,proxy:s}=X(),{$q:r}=s,y=M(e,r),h=C(null),{refocusTargetEl:x,refocusTarget:S}=te(e,h),$=H(e,ae),d=n(()=>e.val!==void 0&&Array.isArray(e.modelValue)),m=n(()=>d.value===!0?e.modelValue.indexOf(e.val):-1),u=n(()=>d.value===!0?m.value>-1:e.modelValue===e.trueValue),b=n(()=>d.value===!0?m.value===-1:e.modelValue===e.falseValue),p=n(()=>u.value===!1&&b.value===!1),O=n(()=>e.disable===!0?-1:e.tabindex||0),B=n(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(y.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),P=n(()=>{const a=u.value===!0?"truthy":b.value===!0?"falsy":"indet",f=e.color!==void 0&&(e.keepColor===!0||(t==="toggle"?u.value===!0:b.value!==!0))?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${a}${f}`}),T=n(()=>{const a={type:"checkbox"};return e.name!==void 0&&Object.assign(a,{"^checked":u.value===!0?"checked":void 0,name:e.name,value:d.value===!0?e.val:e.trueValue}),a}),w=ee(T),A=n(()=>{const a={tabindex:O.value,role:"checkbox","aria-label":e.label,"aria-checked":p.value===!0?"mixed":u.value===!0?"true":"false"};return e.disable===!0&&(a["aria-disabled"]="true"),a});function g(a){a!==void 0&&(I(a),S(a)),e.disable!==!0&&i("update:modelValue",E(),a)}function E(){if(d.value===!0){if(u.value===!0){const a=e.modelValue.slice();return a.splice(m.value,1),a}return e.modelValue.concat([e.val])}if(u.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(b.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function j(a){(a.keyCode===13||a.keyCode===32)&&I(a)}function z(a){(a.keyCode===13||a.keyCode===32)&&g(a)}const F=l(u,p);return Object.assign(s,{toggle:g}),()=>{const a=F();e.disable!==!0&&w(a,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const f=[o("div",{class:P.value,style:$.value},a)];x.value!==null&&f.push(x.value);const V=e.label!==void 0?U(c.default,[e.label]):W(c.default);return V!==void 0&&f.push(o("div",{class:`q-${t}__label q-anchor--skip`},V)),o("div",k(v({ref:h,class:B.value},A.value),{onClick:g,onKeydown:j,onKeyup:z}),f)}}const re=o("div",{key:"svg",class:"q-checkbox__bg absolute"},[o("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[o("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),o("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var de=Y({name:"QCheckbox",props:le,emits:ne,setup(t){function l(e,c){const i=n(()=>(e.value===!0?t.checkedIcon:c.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>i.value!==null?[o("div",{key:"icon",class:"q-checkbox__icon-container absolute flex flex-center no-wrap"},[o(G,{class:"q-checkbox__icon",name:i.value})])]:[re]}return oe("checkbox",l)}});export{de as Q};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUUNoZWNrYm94LjZhNjI3NjViLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1yZWZvY3VzLXRhcmdldC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUvb3B0aW9uLXNpemVzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9jaGVja2JveC91c2UtY2hlY2tib3guanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2NoZWNrYm94L1FDaGVja2JveC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoLCBjb21wdXRlZCwgcmVmIH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocHJvcHMsIHJvb3RSZWYpIHtcbiAgY29uc3QgcmVmb2N1c1JlZiA9IHJlZihudWxsKVxuXG4gIGNvbnN0IHJlZm9jdXNUYXJnZXRFbCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBpZiAocHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gaCgnc3BhbicsIHtcbiAgICAgIHJlZjogcmVmb2N1c1JlZixcbiAgICAgIGNsYXNzOiAnbm8tb3V0bGluZScsXG4gICAgICB0YWJpbmRleDogLTFcbiAgICB9KVxuICB9KVxuXG4gIGZ1bmN0aW9uIHJlZm9jdXNUYXJnZXQgKGUpIHtcbiAgICBjb25zdCByb290ID0gcm9vdFJlZi52YWx1ZVxuXG4gICAgaWYgKGUgIT09IHZvaWQgMCAmJiBlLnR5cGUuaW5kZXhPZigna2V5JykgPT09IDApIHtcbiAgICAgIGlmIChcbiAgICAgICAgcm9vdCAhPT0gbnVsbFxuICAgICAgICAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSByb290XG4gICAgICAgICYmIHJvb3QuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgPT09IHRydWVcbiAgICAgICkge1xuICAgICAgICByb290LmZvY3VzKClcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoXG4gICAgICByZWZvY3VzUmVmLnZhbHVlICE9PSBudWxsXG4gICAgICAmJiAoZSA9PT0gdm9pZCAwIHx8IChyb290ICE9PSBudWxsICYmIHJvb3QuY29udGFpbnMoZS50YXJnZXQpID09PSB0cnVlKSlcbiAgICApIHtcbiAgICAgIHJlZm9jdXNSZWYudmFsdWUuZm9jdXMoKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVmb2N1c1RhcmdldEVsLFxuICAgIHJlZm9jdXNUYXJnZXRcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICB4czogMzAsXG4gIHNtOiAzNSxcbiAgbWQ6IDQwLFxuICBsZzogNTAsXG4gIHhsOiA2MFxufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlRGFyaywgeyB1c2VEYXJrUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1kYXJrLmpzJ1xuaW1wb3J0IHVzZVNpemUsIHsgdXNlU2l6ZVByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc2l6ZS5qcydcbmltcG9ydCB1c2VSZWZvY3VzVGFyZ2V0IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXJlZm9jdXMtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgdXNlRm9ybUluamVjdCwgdXNlRm9ybVByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtZm9ybS5qcydcblxuaW1wb3J0IG9wdGlvblNpemVzIGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvb3B0aW9uLXNpemVzLmpzJ1xuaW1wb3J0IHsgc3RvcEFuZFByZXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IGhTbG90LCBoTWVyZ2VTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMnXG5cbmV4cG9ydCBjb25zdCB1c2VDaGVja2JveFByb3BzID0ge1xuICAuLi51c2VEYXJrUHJvcHMsXG4gIC4uLnVzZVNpemVQcm9wcyxcbiAgLi4udXNlRm9ybVByb3BzLFxuXG4gIG1vZGVsVmFsdWU6IHtcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBkZWZhdWx0OiBudWxsXG4gIH0sXG4gIHZhbDoge30sXG5cbiAgdHJ1ZVZhbHVlOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgZmFsc2VWYWx1ZTogeyBkZWZhdWx0OiBmYWxzZSB9LFxuICBpbmRldGVybWluYXRlVmFsdWU6IHsgZGVmYXVsdDogbnVsbCB9LFxuXG4gIGNoZWNrZWRJY29uOiBTdHJpbmcsXG4gIHVuY2hlY2tlZEljb246IFN0cmluZyxcbiAgaW5kZXRlcm1pbmF0ZUljb246IFN0cmluZyxcblxuICB0b2dnbGVPcmRlcjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB2YWxpZGF0b3I6IHYgPT4gdiA9PT0gJ3RmJyB8fCB2ID09PSAnZnQnXG4gIH0sXG4gIHRvZ2dsZUluZGV0ZXJtaW5hdGU6IEJvb2xlYW4sXG5cbiAgbGFiZWw6IFN0cmluZyxcbiAgbGVmdExhYmVsOiBCb29sZWFuLFxuXG4gIGNvbG9yOiBTdHJpbmcsXG4gIGtlZXBDb2xvcjogQm9vbGVhbixcbiAgZGVuc2U6IEJvb2xlYW4sXG5cbiAgZGlzYWJsZTogQm9vbGVhbixcbiAgdGFiaW5kZXg6IFsgU3RyaW5nLCBOdW1iZXIgXVxufVxuXG5leHBvcnQgY29uc3QgdXNlQ2hlY2tib3hFbWl0cyA9IFsgJ3VwZGF0ZTptb2RlbFZhbHVlJyBdXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh0eXBlLCBnZXRJbm5lcikge1xuICBjb25zdCB7IHByb3BzLCBzbG90cywgZW1pdCwgcHJveHkgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gIGNvbnN0IHsgJHEgfSA9IHByb3h5XG5cbiAgY29uc3QgaXNEYXJrID0gdXNlRGFyayhwcm9wcywgJHEpXG5cbiAgY29uc3Qgcm9vdFJlZiA9IHJlZihudWxsKVxuICBjb25zdCB7IHJlZm9jdXNUYXJnZXRFbCwgcmVmb2N1c1RhcmdldCB9ID0gdXNlUmVmb2N1c1RhcmdldChwcm9wcywgcm9vdFJlZilcbiAgY29uc3Qgc2l6ZVN0eWxlID0gdXNlU2l6ZShwcm9wcywgb3B0aW9uU2l6ZXMpXG5cbiAgY29uc3QgbW9kZWxJc0FycmF5ID0gY29tcHV0ZWQoKCkgPT5cbiAgICBwcm9wcy52YWwgIT09IHZvaWQgMCAmJiBBcnJheS5pc0FycmF5KHByb3BzLm1vZGVsVmFsdWUpXG4gIClcblxuICBjb25zdCBpbmRleCA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBtb2RlbElzQXJyYXkudmFsdWUgPT09IHRydWVcbiAgICAgID8gcHJvcHMubW9kZWxWYWx1ZS5pbmRleE9mKHByb3BzLnZhbClcbiAgICAgIDogLTFcbiAgKSlcblxuICBjb25zdCBpc1RydWUgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgbW9kZWxJc0FycmF5LnZhbHVlID09PSB0cnVlXG4gICAgICA/IGluZGV4LnZhbHVlID4gLTFcbiAgICAgIDogcHJvcHMubW9kZWxWYWx1ZSA9PT0gcHJvcHMudHJ1ZVZhbHVlXG4gICkpXG5cbiAgY29uc3QgaXNGYWxzZSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBtb2RlbElzQXJyYXkudmFsdWUgPT09IHRydWVcbiAgICAgID8gaW5kZXgudmFsdWUgPT09IC0xXG4gICAgICA6IHByb3BzLm1vZGVsVmFsdWUgPT09IHByb3BzLmZhbHNlVmFsdWVcbiAgKSlcblxuICBjb25zdCBpc0luZGV0ZXJtaW5hdGUgPSBjb21wdXRlZCgoKSA9PlxuICAgIGlzVHJ1ZS52YWx1ZSA9PT0gZmFsc2UgJiYgaXNGYWxzZS52YWx1ZSA9PT0gZmFsc2VcbiAgKVxuXG4gIGNvbnN0IHRhYmluZGV4ID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIHByb3BzLmRpc2FibGUgPT09IHRydWUgPyAtMSA6IHByb3BzLnRhYmluZGV4IHx8IDBcbiAgKSlcblxuICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICBgcS0keyB0eXBlIH0gY3Vyc29yLXBvaW50ZXIgbm8tb3V0bGluZSByb3cgaW5saW5lIG5vLXdyYXAgaXRlbXMtY2VudGVyYFxuICAgICsgKHByb3BzLmRpc2FibGUgPT09IHRydWUgPyAnIGRpc2FibGVkJyA6ICcnKVxuICAgICsgKGlzRGFyay52YWx1ZSA9PT0gdHJ1ZSA/IGAgcS0keyB0eXBlIH0tLWRhcmtgIDogJycpXG4gICAgKyAocHJvcHMuZGVuc2UgPT09IHRydWUgPyBgIHEtJHsgdHlwZSB9LS1kZW5zZWAgOiAnJylcbiAgICArIChwcm9wcy5sZWZ0TGFiZWwgPT09IHRydWUgPyAnIHJldmVyc2UnIDogJycpXG4gIClcblxuICBjb25zdCBpbm5lckNsYXNzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gaXNUcnVlLnZhbHVlID09PSB0cnVlID8gJ3RydXRoeScgOiAoaXNGYWxzZS52YWx1ZSA9PT0gdHJ1ZSA/ICdmYWxzeScgOiAnaW5kZXQnKVxuICAgIGNvbnN0IGNvbG9yID0gcHJvcHMuY29sb3IgIT09IHZvaWQgMCAmJiAoXG4gICAgICBwcm9wcy5rZWVwQ29sb3IgPT09IHRydWVcbiAgICAgIHx8ICh0eXBlID09PSAndG9nZ2xlJyA/IGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSA6IGlzRmFsc2UudmFsdWUgIT09IHRydWUpXG4gICAgKVxuICAgICAgPyBgIHRleHQtJHsgcHJvcHMuY29sb3IgfWBcbiAgICAgIDogJydcblxuICAgIHJldHVybiBgcS0keyB0eXBlIH1fX2lubmVyIHJlbGF0aXZlLXBvc2l0aW9uIG5vbi1zZWxlY3RhYmxlIHEtJHsgdHlwZSB9X19pbm5lci0tJHsgc3RhdGUgfSR7IGNvbG9yIH1gXG4gIH0pXG5cbiAgY29uc3QgZm9ybUF0dHJzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IHByb3AgPSB7IHR5cGU6ICdjaGVja2JveCcgfVxuXG4gICAgcHJvcHMubmFtZSAhPT0gdm9pZCAwICYmIE9iamVjdC5hc3NpZ24ocHJvcCwge1xuICAgICAgJ15jaGVja2VkJzogaXNUcnVlLnZhbHVlID09PSB0cnVlID8gJ2NoZWNrZWQnIDogdm9pZCAwLFxuICAgICAgbmFtZTogcHJvcHMubmFtZSxcbiAgICAgIHZhbHVlOiBtb2RlbElzQXJyYXkudmFsdWUgPT09IHRydWVcbiAgICAgICAgPyBwcm9wcy52YWxcbiAgICAgICAgOiBwcm9wcy50cnVlVmFsdWVcbiAgICB9KVxuXG4gICAgcmV0dXJuIHByb3BcbiAgfSlcblxuICBjb25zdCBpbmplY3RGb3JtSW5wdXQgPSB1c2VGb3JtSW5qZWN0KGZvcm1BdHRycylcblxuICBjb25zdCBhdHRyaWJ1dGVzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IGF0dHJzID0ge1xuICAgICAgdGFiaW5kZXg6IHRhYmluZGV4LnZhbHVlLFxuICAgICAgcm9sZTogJ2NoZWNrYm94JyxcbiAgICAgICdhcmlhLWxhYmVsJzogcHJvcHMubGFiZWwsXG4gICAgICAnYXJpYS1jaGVja2VkJzogaXNJbmRldGVybWluYXRlLnZhbHVlID09PSB0cnVlXG4gICAgICAgID8gJ21peGVkJ1xuICAgICAgICA6IChpc1RydWUudmFsdWUgPT09IHRydWUgPyAndHJ1ZScgOiAnZmFsc2UnKVxuICAgIH1cblxuICAgIGlmIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICBhdHRyc1sgJ2FyaWEtZGlzYWJsZWQnIF0gPSAndHJ1ZSdcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cnNcbiAgfSlcblxuICBmdW5jdGlvbiBvbkNsaWNrIChlKSB7XG4gICAgaWYgKGUgIT09IHZvaWQgMCkge1xuICAgICAgc3RvcEFuZFByZXZlbnQoZSlcbiAgICAgIHJlZm9jdXNUYXJnZXQoZSlcbiAgICB9XG5cbiAgICBpZiAocHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSkge1xuICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBnZXROZXh0VmFsdWUoKSwgZSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXROZXh0VmFsdWUgKCkge1xuICAgIGlmIChtb2RlbElzQXJyYXkudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGlmIChpc1RydWUudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgdmFsID0gcHJvcHMubW9kZWxWYWx1ZS5zbGljZSgpXG4gICAgICAgIHZhbC5zcGxpY2UoaW5kZXgudmFsdWUsIDEpXG4gICAgICAgIHJldHVybiB2YWxcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb3BzLm1vZGVsVmFsdWUuY29uY2F0KFsgcHJvcHMudmFsIF0pXG4gICAgfVxuXG4gICAgaWYgKGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHByb3BzLnRvZ2dsZU9yZGVyICE9PSAnZnQnIHx8IHByb3BzLnRvZ2dsZUluZGV0ZXJtaW5hdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBwcm9wcy5mYWxzZVZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRmFsc2UudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGlmIChwcm9wcy50b2dnbGVPcmRlciA9PT0gJ2Z0JyB8fCBwcm9wcy50b2dnbGVJbmRldGVybWluYXRlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gcHJvcHMudHJ1ZVZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHByb3BzLnRvZ2dsZU9yZGVyICE9PSAnZnQnXG4gICAgICAgID8gcHJvcHMudHJ1ZVZhbHVlXG4gICAgICAgIDogcHJvcHMuZmFsc2VWYWx1ZVxuICAgIH1cblxuICAgIHJldHVybiBwcm9wcy5pbmRldGVybWluYXRlVmFsdWVcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5ZG93biAoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzIHx8IGUua2V5Q29kZSA9PT0gMzIpIHtcbiAgICAgIHN0b3BBbmRQcmV2ZW50KGUpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25LZXl1cCAoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzIHx8IGUua2V5Q29kZSA9PT0gMzIpIHtcbiAgICAgIG9uQ2xpY2soZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBnZXRJbm5lckNvbnRlbnQgPSBnZXRJbm5lcihpc1RydWUsIGlzSW5kZXRlcm1pbmF0ZSlcblxuICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgT2JqZWN0LmFzc2lnbihwcm94eSwgeyB0b2dnbGU6IG9uQ2xpY2sgfSlcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnN0IGlubmVyID0gZ2V0SW5uZXJDb250ZW50KClcblxuICAgIHByb3BzLmRpc2FibGUgIT09IHRydWUgJiYgaW5qZWN0Rm9ybUlucHV0KFxuICAgICAgaW5uZXIsXG4gICAgICAndW5zaGlmdCcsXG4gICAgICBgIHEtJHsgdHlwZSB9X19uYXRpdmUgYWJzb2x1dGUgcS1tYS1ub25lIHEtcGEtbm9uZWBcbiAgICApXG5cbiAgICBjb25zdCBjaGlsZCA9IFtcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6IGlubmVyQ2xhc3MudmFsdWUsXG4gICAgICAgIHN0eWxlOiBzaXplU3R5bGUudmFsdWVcbiAgICAgIH0sIGlubmVyKVxuICAgIF1cblxuICAgIGlmIChyZWZvY3VzVGFyZ2V0RWwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgIGNoaWxkLnB1c2gocmVmb2N1c1RhcmdldEVsLnZhbHVlKVxuICAgIH1cblxuICAgIGNvbnN0IGxhYmVsID0gcHJvcHMubGFiZWwgIT09IHZvaWQgMFxuICAgICAgPyBoTWVyZ2VTbG90KHNsb3RzLmRlZmF1bHQsIFsgcHJvcHMubGFiZWwgXSlcbiAgICAgIDogaFNsb3Qoc2xvdHMuZGVmYXVsdClcblxuICAgIGxhYmVsICE9PSB2b2lkIDAgJiYgY2hpbGQucHVzaChcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6IGBxLSR7IHR5cGUgfV9fbGFiZWwgcS1hbmNob3ItLXNraXBgXG4gICAgICB9LCBsYWJlbClcbiAgICApXG5cbiAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgcmVmOiByb290UmVmLFxuICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICAuLi5hdHRyaWJ1dGVzLnZhbHVlLFxuICAgICAgb25DbGljayxcbiAgICAgIG9uS2V5ZG93bixcbiAgICAgIG9uS2V5dXBcbiAgICB9LCBjaGlsZClcbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBRSWNvbiBmcm9tICcuLi9pY29uL1FJY29uLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCB1c2VDaGVja2JveCwgeyB1c2VDaGVja2JveFByb3BzLCB1c2VDaGVja2JveEVtaXRzIH0gZnJvbSAnLi91c2UtY2hlY2tib3guanMnXG5cbmNvbnN0IGJnTm9kZSA9IGgoJ2RpdicsIHtcbiAga2V5OiAnc3ZnJyxcbiAgY2xhc3M6ICdxLWNoZWNrYm94X19iZyBhYnNvbHV0ZSdcbn0sIFtcbiAgaCgnc3ZnJywge1xuICAgIGNsYXNzOiAncS1jaGVja2JveF9fc3ZnIGZpdCBhYnNvbHV0ZS1mdWxsJyxcbiAgICB2aWV3Qm94OiAnMCAwIDI0IDI0JyxcbiAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbiAgfSwgW1xuICAgIGgoJ3BhdGgnLCB7XG4gICAgICBjbGFzczogJ3EtY2hlY2tib3hfX3RydXRoeScsXG4gICAgICBmaWxsOiAnbm9uZScsXG4gICAgICBkOiAnTTEuNzMsMTIuOTEgOC4xLDE5LjI4IDIyLjc5LDQuNTknXG4gICAgfSksXG5cbiAgICBoKCdwYXRoJywge1xuICAgICAgY2xhc3M6ICdxLWNoZWNrYm94X19pbmRldCcsXG4gICAgICBkOiAnTTQsMTRIMjBWMTBINCdcbiAgICB9KVxuICBdKVxuXSlcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FDaGVja2JveCcsXG5cbiAgcHJvcHM6IHVzZUNoZWNrYm94UHJvcHMsXG4gIGVtaXRzOiB1c2VDaGVja2JveEVtaXRzLFxuXG4gIHNldHVwIChwcm9wcykge1xuICAgIGZ1bmN0aW9uIGdldElubmVyIChpc1RydWUsIGlzSW5kZXRlcm1pbmF0ZSkge1xuICAgICAgY29uc3QgaWNvbiA9IGNvbXB1dGVkKCgpID0+XG4gICAgICAgIChpc1RydWUudmFsdWUgPT09IHRydWVcbiAgICAgICAgICA/IHByb3BzLmNoZWNrZWRJY29uXG4gICAgICAgICAgOiAoaXNJbmRldGVybWluYXRlLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICAgID8gcHJvcHMuaW5kZXRlcm1pbmF0ZUljb25cbiAgICAgICAgICAgICAgOiBwcm9wcy51bmNoZWNrZWRJY29uXG4gICAgICAgICAgICApXG4gICAgICAgICkgfHwgbnVsbFxuICAgICAgKVxuXG4gICAgICByZXR1cm4gKCkgPT4gKFxuICAgICAgICBpY29uLnZhbHVlICE9PSBudWxsXG4gICAgICAgICAgPyBbXG4gICAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdpY29uJyxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3EtY2hlY2tib3hfX2ljb24tY29udGFpbmVyIGFic29sdXRlIGZsZXggZmxleC1jZW50ZXIgbm8td3JhcCdcbiAgICAgICAgICAgICAgfSwgW1xuICAgICAgICAgICAgICAgIGgoUUljb24sIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzOiAncS1jaGVja2JveF9faWNvbicsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBpY29uLnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIF1cbiAgICAgICAgICA6IFsgYmdOb2RlIF1cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlQ2hlY2tib3goJ2NoZWNrYm94JywgZ2V0SW5uZXIpXG4gIH1cbn0pXG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjJvQkFFZSxZQUFVLEVBQU8sRUFBUyxDQUN2QyxLQUFNLEdBQWEsRUFBSSxJQUFJLEVBRXJCLEVBQWtCLEVBQVMsSUFDM0IsRUFBTSxVQUFZLEdBQ2IsS0FHRixFQUFFLE9BQVEsQ0FDZixJQUFLLEVBQ0wsTUFBTyxhQUNQLFNBQVUsRUFDaEIsQ0FBSyxDQUNGLEVBRUQsV0FBd0IsRUFBRyxDQUN6QixLQUFNLEdBQU8sRUFBUSxNQUVyQixBQUFJLElBQU0sUUFBVSxFQUFFLEtBQUssUUFBUSxLQUFLLElBQU0sRUFFMUMsSUFBUyxNQUNOLFNBQVMsZ0JBQWtCLEdBQzNCLEVBQUssU0FBUyxTQUFTLGFBQWEsSUFBTSxJQUU3QyxFQUFLLE1BQU8sRUFJZCxFQUFXLFFBQVUsTUFDakIsS0FBTSxRQUFXLElBQVMsTUFBUSxFQUFLLFNBQVMsRUFBRSxNQUFNLElBQU0sS0FFbEUsRUFBVyxNQUFNLE1BQU8sQ0FFM0IsQ0FFRCxNQUFPLENBQ0wsa0JBQ0EsZUFDRCxDQUNILENDekNBLEdBQWUsSUFBQSxDQUNiLEdBQUksR0FDSixHQUFJLEdBQ0osR0FBSSxHQUNKLEdBQUksR0FDSixHQUFJLEVBQ04sRUNLTyxLQUFNLElBQW1CLFdBQzNCLEdBQ0EsR0FDQSxHQUgyQixDQUs5QixXQUFZLENBQ1YsU0FBVSxHQUNWLFFBQVMsSUFDVixFQUNELElBQUssQ0FBRSxFQUVQLFVBQVcsQ0FBRSxRQUFTLEVBQU0sRUFDNUIsV0FBWSxDQUFFLFFBQVMsRUFBTyxFQUM5QixtQkFBb0IsQ0FBRSxRQUFTLElBQU0sRUFFckMsWUFBYSxPQUNiLGNBQWUsT0FDZixrQkFBbUIsT0FFbkIsWUFBYSxDQUNYLEtBQU0sT0FDTixVQUFXLEdBQUssSUFBTSxNQUFRLElBQU0sSUFD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
